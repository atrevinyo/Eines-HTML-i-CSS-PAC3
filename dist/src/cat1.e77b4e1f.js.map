{"mappings":"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","sources":["node_modules/viewerjs/dist/viewer.js","js/eines.js"],"sourcesContent":["/*!\n * Viewer.js v1.10.1\n * https://fengyuanchen.github.io/viewerjs\n *\n * Copyright 2015-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2021-08-01T13:35:49.731Z\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.Viewer = factory());\n}(this, (function () { 'use strict';\n\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n\n      if (enumerableOnly) {\n        symbols = symbols.filter(function (sym) {\n          return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n        });\n      }\n\n      keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n  }\n\n  function _objectSpread2(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n\n      if (i % 2) {\n        ownKeys(Object(source), true).forEach(function (key) {\n          _defineProperty(target, key, source[key]);\n        });\n      } else if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys(Object(source)).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n\n    return target;\n  }\n\n  function _typeof(obj) {\n    \"@babel/helpers - typeof\";\n\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      _typeof = function (obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return _typeof(obj);\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  var DEFAULTS = {\n    /**\n     * Enable a modal backdrop, specify `static` for a backdrop\n     * which doesn't close the modal on click.\n     * @type {boolean}\n     */\n    backdrop: true,\n\n    /**\n     * Show the button on the top-right of the viewer.\n     * @type {boolean}\n     */\n    button: true,\n\n    /**\n     * Show the navbar.\n     * @type {boolean | number}\n     */\n    navbar: true,\n\n    /**\n     * Specify the visibility and the content of the title.\n     * @type {boolean | number | Function | Array}\n     */\n    title: true,\n\n    /**\n     * Show the toolbar.\n     * @type {boolean | number | Object}\n     */\n    toolbar: true,\n\n    /**\n     * Custom class name(s) to add to the viewer's root element.\n     * @type {string}\n     */\n    className: '',\n\n    /**\n     * Define where to put the viewer in modal mode.\n     * @type {string | Element}\n     */\n    container: 'body',\n\n    /**\n     * Filter the images for viewing. Return true if the image is viewable.\n     * @type {Function}\n     */\n    filter: null,\n\n    /**\n     * Enable to request fullscreen when play.\n     * {@link https://developer.mozilla.org/en-US/docs/Web/API/FullscreenOptions}\n     * @type {boolean|FullscreenOptions}\n     */\n    fullscreen: true,\n\n    /**\n     * Define the extra attributes to inherit from the original image.\n     * @type {Array}\n     */\n    inheritedAttributes: ['crossOrigin', 'decoding', 'isMap', 'loading', 'referrerPolicy', 'sizes', 'srcset', 'useMap'],\n\n    /**\n     * Define the initial index of image for viewing.\n     * @type {number}\n     */\n    initialViewIndex: 0,\n\n    /**\n     * Enable inline mode.\n     * @type {boolean}\n     */\n    inline: false,\n\n    /**\n     * The amount of time to delay between automatically cycling an image when playing.\n     * @type {number}\n     */\n    interval: 5000,\n\n    /**\n     * Enable keyboard support.\n     * @type {boolean}\n     */\n    keyboard: true,\n\n    /**\n     * Focus the viewer when initialized.\n     * @type {boolean}\n     */\n    focus: true,\n\n    /**\n     * Indicate if show a loading spinner when load image or not.\n     * @type {boolean}\n     */\n    loading: true,\n\n    /**\n     * Indicate if enable loop viewing or not.\n     * @type {boolean}\n     */\n    loop: true,\n\n    /**\n     * Min width of the viewer in inline mode.\n     * @type {number}\n     */\n    minWidth: 200,\n\n    /**\n     * Min height of the viewer in inline mode.\n     * @type {number}\n     */\n    minHeight: 100,\n\n    /**\n     * Enable to move the image.\n     * @type {boolean}\n     */\n    movable: true,\n\n    /**\n     * Enable to rotate the image.\n     * @type {boolean}\n     */\n    rotatable: true,\n\n    /**\n     * Enable to scale the image.\n     * @type {boolean}\n     */\n    scalable: true,\n\n    /**\n     * Enable to zoom the image.\n     * @type {boolean}\n     */\n    zoomable: true,\n\n    /**\n     * Enable to zoom the current image by dragging on the touch screen.\n     * @type {boolean}\n     */\n    zoomOnTouch: true,\n\n    /**\n     * Enable to zoom the image by wheeling mouse.\n     * @type {boolean}\n     */\n    zoomOnWheel: true,\n\n    /**\n     * Enable to slide to the next or previous image by swiping on the touch screen.\n     * @type {boolean}\n     */\n    slideOnTouch: true,\n\n    /**\n     * Indicate if toggle the image size between its natural size\n     * and initial size when double click on the image or not.\n     * @type {boolean}\n     */\n    toggleOnDblclick: true,\n\n    /**\n     * Show the tooltip with image ratio (percentage) when zoom in or zoom out.\n     * @type {boolean}\n     */\n    tooltip: true,\n\n    /**\n     * Enable CSS3 Transition for some special elements.\n     * @type {boolean}\n     */\n    transition: true,\n\n    /**\n     * Define the CSS `z-index` value of viewer in modal mode.\n     * @type {number}\n     */\n    zIndex: 2015,\n\n    /**\n     * Define the CSS `z-index` value of viewer in inline mode.\n     * @type {number}\n     */\n    zIndexInline: 0,\n\n    /**\n     * Define the ratio when zoom the image by wheeling mouse.\n     * @type {number}\n     */\n    zoomRatio: 0.1,\n\n    /**\n     * Define the min ratio of the image when zoom out.\n     * @type {number}\n     */\n    minZoomRatio: 0.01,\n\n    /**\n     * Define the max ratio of the image when zoom in.\n     * @type {number}\n     */\n    maxZoomRatio: 100,\n\n    /**\n     * Define where to get the original image URL for viewing.\n     * @type {string | Function}\n     */\n    url: 'src',\n\n    /**\n     * Event shortcuts.\n     * @type {Function}\n     */\n    ready: null,\n    show: null,\n    shown: null,\n    hide: null,\n    hidden: null,\n    view: null,\n    viewed: null,\n    move: null,\n    moved: null,\n    rotate: null,\n    rotated: null,\n    scale: null,\n    scaled: null,\n    zoom: null,\n    zoomed: null,\n    play: null,\n    stop: null\n  };\n\n  var TEMPLATE = '<div class=\"viewer-container\" tabindex=\"-1\" touch-action=\"none\">' + '<div class=\"viewer-canvas\"></div>' + '<div class=\"viewer-footer\">' + '<div class=\"viewer-title\"></div>' + '<div class=\"viewer-toolbar\"></div>' + '<div class=\"viewer-navbar\">' + '<ul class=\"viewer-list\" role=\"navigation\"></ul>' + '</div>' + '</div>' + '<div class=\"viewer-tooltip\" role=\"alert\" aria-hidden=\"true\"></div>' + '<div class=\"viewer-button\" data-viewer-action=\"mix\" role=\"button\"></div>' + '<div class=\"viewer-player\"></div>' + '</div>';\n\n  var IS_BROWSER = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  var WINDOW = IS_BROWSER ? window : {};\n  var IS_TOUCH_DEVICE = IS_BROWSER && WINDOW.document.documentElement ? 'ontouchstart' in WINDOW.document.documentElement : false;\n  var HAS_POINTER_EVENT = IS_BROWSER ? 'PointerEvent' in WINDOW : false;\n  var NAMESPACE = 'viewer'; // Actions\n\n  var ACTION_MOVE = 'move';\n  var ACTION_SWITCH = 'switch';\n  var ACTION_ZOOM = 'zoom'; // Classes\n\n  var CLASS_ACTIVE = \"\".concat(NAMESPACE, \"-active\");\n  var CLASS_CLOSE = \"\".concat(NAMESPACE, \"-close\");\n  var CLASS_FADE = \"\".concat(NAMESPACE, \"-fade\");\n  var CLASS_FIXED = \"\".concat(NAMESPACE, \"-fixed\");\n  var CLASS_FULLSCREEN = \"\".concat(NAMESPACE, \"-fullscreen\");\n  var CLASS_FULLSCREEN_EXIT = \"\".concat(NAMESPACE, \"-fullscreen-exit\");\n  var CLASS_HIDE = \"\".concat(NAMESPACE, \"-hide\");\n  var CLASS_HIDE_MD_DOWN = \"\".concat(NAMESPACE, \"-hide-md-down\");\n  var CLASS_HIDE_SM_DOWN = \"\".concat(NAMESPACE, \"-hide-sm-down\");\n  var CLASS_HIDE_XS_DOWN = \"\".concat(NAMESPACE, \"-hide-xs-down\");\n  var CLASS_IN = \"\".concat(NAMESPACE, \"-in\");\n  var CLASS_INVISIBLE = \"\".concat(NAMESPACE, \"-invisible\");\n  var CLASS_LOADING = \"\".concat(NAMESPACE, \"-loading\");\n  var CLASS_MOVE = \"\".concat(NAMESPACE, \"-move\");\n  var CLASS_OPEN = \"\".concat(NAMESPACE, \"-open\");\n  var CLASS_SHOW = \"\".concat(NAMESPACE, \"-show\");\n  var CLASS_TRANSITION = \"\".concat(NAMESPACE, \"-transition\"); // Native events\n\n  var EVENT_CLICK = 'click';\n  var EVENT_DBLCLICK = 'dblclick';\n  var EVENT_DRAG_START = 'dragstart';\n  var EVENT_FOCUSIN = 'focusin';\n  var EVENT_KEY_DOWN = 'keydown';\n  var EVENT_LOAD = 'load';\n  var EVENT_TOUCH_END = IS_TOUCH_DEVICE ? 'touchend touchcancel' : 'mouseup';\n  var EVENT_TOUCH_MOVE = IS_TOUCH_DEVICE ? 'touchmove' : 'mousemove';\n  var EVENT_TOUCH_START = IS_TOUCH_DEVICE ? 'touchstart' : 'mousedown';\n  var EVENT_POINTER_DOWN = HAS_POINTER_EVENT ? 'pointerdown' : EVENT_TOUCH_START;\n  var EVENT_POINTER_MOVE = HAS_POINTER_EVENT ? 'pointermove' : EVENT_TOUCH_MOVE;\n  var EVENT_POINTER_UP = HAS_POINTER_EVENT ? 'pointerup pointercancel' : EVENT_TOUCH_END;\n  var EVENT_RESIZE = 'resize';\n  var EVENT_TRANSITION_END = 'transitionend';\n  var EVENT_WHEEL = 'wheel'; // Custom events\n\n  var EVENT_READY = 'ready';\n  var EVENT_SHOW = 'show';\n  var EVENT_SHOWN = 'shown';\n  var EVENT_HIDE = 'hide';\n  var EVENT_HIDDEN = 'hidden';\n  var EVENT_VIEW = 'view';\n  var EVENT_VIEWED = 'viewed';\n  var EVENT_MOVE = 'move';\n  var EVENT_MOVED = 'moved';\n  var EVENT_ROTATE = 'rotate';\n  var EVENT_ROTATED = 'rotated';\n  var EVENT_SCALE = 'scale';\n  var EVENT_SCALED = 'scaled';\n  var EVENT_ZOOM = 'zoom';\n  var EVENT_ZOOMED = 'zoomed';\n  var EVENT_PLAY = 'play';\n  var EVENT_STOP = 'stop'; // Data keys\n\n  var DATA_ACTION = \"\".concat(NAMESPACE, \"Action\"); // RegExps\n\n  var REGEXP_SPACES = /\\s\\s*/; // Misc\n\n  var BUTTONS = ['zoom-in', 'zoom-out', 'one-to-one', 'reset', 'prev', 'play', 'next', 'rotate-left', 'rotate-right', 'flip-horizontal', 'flip-vertical'];\n\n  /**\n   * Check if the given value is a string.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a string, else `false`.\n   */\n\n  function isString(value) {\n    return typeof value === 'string';\n  }\n  /**\n   * Check if the given value is not a number.\n   */\n\n  var isNaN = Number.isNaN || WINDOW.isNaN;\n  /**\n   * Check if the given value is a number.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a number, else `false`.\n   */\n\n  function isNumber(value) {\n    return typeof value === 'number' && !isNaN(value);\n  }\n  /**\n   * Check if the given value is undefined.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is undefined, else `false`.\n   */\n\n  function isUndefined(value) {\n    return typeof value === 'undefined';\n  }\n  /**\n   * Check if the given value is an object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is an object, else `false`.\n   */\n\n  function isObject(value) {\n    return _typeof(value) === 'object' && value !== null;\n  }\n  var hasOwnProperty = Object.prototype.hasOwnProperty;\n  /**\n   * Check if the given value is a plain object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a plain object, else `false`.\n   */\n\n  function isPlainObject(value) {\n    if (!isObject(value)) {\n      return false;\n    }\n\n    try {\n      var _constructor = value.constructor;\n      var prototype = _constructor.prototype;\n      return _constructor && prototype && hasOwnProperty.call(prototype, 'isPrototypeOf');\n    } catch (error) {\n      return false;\n    }\n  }\n  /**\n   * Check if the given value is a function.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a function, else `false`.\n   */\n\n  function isFunction(value) {\n    return typeof value === 'function';\n  }\n  /**\n   * Iterate the given data.\n   * @param {*} data - The data to iterate.\n   * @param {Function} callback - The process function for each element.\n   * @returns {*} The original data.\n   */\n\n  function forEach(data, callback) {\n    if (data && isFunction(callback)) {\n      if (Array.isArray(data) || isNumber(data.length)\n      /* array-like */\n      ) {\n        var length = data.length;\n        var i;\n\n        for (i = 0; i < length; i += 1) {\n          if (callback.call(data, data[i], i, data) === false) {\n            break;\n          }\n        }\n      } else if (isObject(data)) {\n        Object.keys(data).forEach(function (key) {\n          callback.call(data, data[key], key, data);\n        });\n      }\n    }\n\n    return data;\n  }\n  /**\n   * Extend the given object.\n   * @param {*} obj - The object to be extended.\n   * @param {*} args - The rest objects which will be merged to the first object.\n   * @returns {Object} The extended object.\n   */\n\n  var assign = Object.assign || function assign(obj) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    if (isObject(obj) && args.length > 0) {\n      args.forEach(function (arg) {\n        if (isObject(arg)) {\n          Object.keys(arg).forEach(function (key) {\n            obj[key] = arg[key];\n          });\n        }\n      });\n    }\n\n    return obj;\n  };\n  var REGEXP_SUFFIX = /^(?:width|height|left|top|marginLeft|marginTop)$/;\n  /**\n   * Apply styles to the given element.\n   * @param {Element} element - The target element.\n   * @param {Object} styles - The styles for applying.\n   */\n\n  function setStyle(element, styles) {\n    var style = element.style;\n    forEach(styles, function (value, property) {\n      if (REGEXP_SUFFIX.test(property) && isNumber(value)) {\n        value += 'px';\n      }\n\n      style[property] = value;\n    });\n  }\n  /**\n   * Escape a string for using in HTML.\n   * @param {String} value - The string to escape.\n   * @returns {String} Returns the escaped string.\n   */\n\n  function escapeHTMLEntities(value) {\n    return isString(value) ? value.replace(/&(?!amp;|quot;|#39;|lt;|gt;)/g, '&amp;').replace(/\"/g, '&quot;').replace(/'/g, '&#39;').replace(/</g, '&lt;').replace(/>/g, '&gt;') : value;\n  }\n  /**\n   * Check if the given element has a special class.\n   * @param {Element} element - The element to check.\n   * @param {string} value - The class to search.\n   * @returns {boolean} Returns `true` if the special class was found.\n   */\n\n  function hasClass(element, value) {\n    if (!element || !value) {\n      return false;\n    }\n\n    return element.classList ? element.classList.contains(value) : element.className.indexOf(value) > -1;\n  }\n  /**\n   * Add classes to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be added.\n   */\n\n  function addClass(element, value) {\n    if (!element || !value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        addClass(elem, value);\n      });\n      return;\n    }\n\n    if (element.classList) {\n      element.classList.add(value);\n      return;\n    }\n\n    var className = element.className.trim();\n\n    if (!className) {\n      element.className = value;\n    } else if (className.indexOf(value) < 0) {\n      element.className = \"\".concat(className, \" \").concat(value);\n    }\n  }\n  /**\n   * Remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be removed.\n   */\n\n  function removeClass(element, value) {\n    if (!element || !value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        removeClass(elem, value);\n      });\n      return;\n    }\n\n    if (element.classList) {\n      element.classList.remove(value);\n      return;\n    }\n\n    if (element.className.indexOf(value) >= 0) {\n      element.className = element.className.replace(value, '');\n    }\n  }\n  /**\n   * Add or remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be toggled.\n   * @param {boolean} added - Add only.\n   */\n\n  function toggleClass(element, value, added) {\n    if (!value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        toggleClass(elem, value, added);\n      });\n      return;\n    } // IE10-11 doesn't support the second parameter of `classList.toggle`\n\n\n    if (added) {\n      addClass(element, value);\n    } else {\n      removeClass(element, value);\n    }\n  }\n  var REGEXP_HYPHENATE = /([a-z\\d])([A-Z])/g;\n  /**\n   * Transform the given string from camelCase to kebab-case\n   * @param {string} value - The value to transform.\n   * @returns {string} The transformed value.\n   */\n\n  function hyphenate(value) {\n    return value.replace(REGEXP_HYPHENATE, '$1-$2').toLowerCase();\n  }\n  /**\n   * Get data from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to get.\n   * @returns {string} The data value.\n   */\n\n  function getData(element, name) {\n    if (isObject(element[name])) {\n      return element[name];\n    }\n\n    if (element.dataset) {\n      return element.dataset[name];\n    }\n\n    return element.getAttribute(\"data-\".concat(hyphenate(name)));\n  }\n  /**\n   * Set data to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to set.\n   * @param {string} data - The data value.\n   */\n\n  function setData(element, name, data) {\n    if (isObject(data)) {\n      element[name] = data;\n    } else if (element.dataset) {\n      element.dataset[name] = data;\n    } else {\n      element.setAttribute(\"data-\".concat(hyphenate(name)), data);\n    }\n  }\n\n  var onceSupported = function () {\n    var supported = false;\n\n    if (IS_BROWSER) {\n      var once = false;\n\n      var listener = function listener() {};\n\n      var options = Object.defineProperty({}, 'once', {\n        get: function get() {\n          supported = true;\n          return once;\n        },\n\n        /**\n         * This setter can fix a `TypeError` in strict mode\n         * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Getter_only}\n         * @param {boolean} value - The value to set\n         */\n        set: function set(value) {\n          once = value;\n        }\n      });\n      WINDOW.addEventListener('test', listener, options);\n      WINDOW.removeEventListener('test', listener, options);\n    }\n\n    return supported;\n  }();\n  /**\n   * Remove event listener from the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n\n\n  function removeListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (!onceSupported) {\n        var listeners = element.listeners;\n\n        if (listeners && listeners[event] && listeners[event][listener]) {\n          handler = listeners[event][listener];\n          delete listeners[event][listener];\n\n          if (Object.keys(listeners[event]).length === 0) {\n            delete listeners[event];\n          }\n\n          if (Object.keys(listeners).length === 0) {\n            delete element.listeners;\n          }\n        }\n      }\n\n      element.removeEventListener(event, handler, options);\n    });\n  }\n  /**\n   * Add event listener to the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n\n  function addListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var _handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (options.once && !onceSupported) {\n        var _element$listeners = element.listeners,\n            listeners = _element$listeners === void 0 ? {} : _element$listeners;\n\n        _handler = function handler() {\n          delete listeners[event][listener];\n          element.removeEventListener(event, _handler, options);\n\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n\n          listener.apply(element, args);\n        };\n\n        if (!listeners[event]) {\n          listeners[event] = {};\n        }\n\n        if (listeners[event][listener]) {\n          element.removeEventListener(event, listeners[event][listener], options);\n        }\n\n        listeners[event][listener] = _handler;\n        element.listeners = listeners;\n      }\n\n      element.addEventListener(event, _handler, options);\n    });\n  }\n  /**\n   * Dispatch event on the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Object} data - The additional event data.\n   * @param {Object} options - The additional event options.\n   * @returns {boolean} Indicate if the event is default prevented or not.\n   */\n\n  function dispatchEvent(element, type, data, options) {\n    var event; // Event and CustomEvent on IE9-11 are global objects, not constructors\n\n    if (isFunction(Event) && isFunction(CustomEvent)) {\n      event = new CustomEvent(type, _objectSpread2({\n        bubbles: true,\n        cancelable: true,\n        detail: data\n      }, options));\n    } else {\n      event = document.createEvent('CustomEvent');\n      event.initCustomEvent(type, true, true, data);\n    }\n\n    return element.dispatchEvent(event);\n  }\n  /**\n   * Get the offset base on the document.\n   * @param {Element} element - The target element.\n   * @returns {Object} The offset data.\n   */\n\n  function getOffset(element) {\n    var box = element.getBoundingClientRect();\n    return {\n      left: box.left + (window.pageXOffset - document.documentElement.clientLeft),\n      top: box.top + (window.pageYOffset - document.documentElement.clientTop)\n    };\n  }\n  /**\n   * Get transforms base on the given object.\n   * @param {Object} obj - The target object.\n   * @returns {string} A string contains transform values.\n   */\n\n  function getTransforms(_ref) {\n    var rotate = _ref.rotate,\n        scaleX = _ref.scaleX,\n        scaleY = _ref.scaleY,\n        translateX = _ref.translateX,\n        translateY = _ref.translateY;\n    var values = [];\n\n    if (isNumber(translateX) && translateX !== 0) {\n      values.push(\"translateX(\".concat(translateX, \"px)\"));\n    }\n\n    if (isNumber(translateY) && translateY !== 0) {\n      values.push(\"translateY(\".concat(translateY, \"px)\"));\n    } // Rotate should come first before scale to match orientation transform\n\n\n    if (isNumber(rotate) && rotate !== 0) {\n      values.push(\"rotate(\".concat(rotate, \"deg)\"));\n    }\n\n    if (isNumber(scaleX) && scaleX !== 1) {\n      values.push(\"scaleX(\".concat(scaleX, \")\"));\n    }\n\n    if (isNumber(scaleY) && scaleY !== 1) {\n      values.push(\"scaleY(\".concat(scaleY, \")\"));\n    }\n\n    var transform = values.length ? values.join(' ') : 'none';\n    return {\n      WebkitTransform: transform,\n      msTransform: transform,\n      transform: transform\n    };\n  }\n  /**\n   * Get an image name from an image url.\n   * @param {string} url - The target url.\n   * @example\n   * // picture.jpg\n   * getImageNameFromURL('https://domain.com/path/to/picture.jpg?size=1280×960')\n   * @returns {string} A string contains the image name.\n   */\n\n  function getImageNameFromURL(url) {\n    return isString(url) ? decodeURIComponent(url.replace(/^.*\\//, '').replace(/[?&#].*$/, '')) : '';\n  }\n  var IS_SAFARI = WINDOW.navigator && /(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(WINDOW.navigator.userAgent);\n  /**\n   * Get an image's natural sizes.\n   * @param {string} image - The target image.\n   * @param {Object} options - The viewer options.\n   * @param {Function} callback - The callback function.\n   * @returns {HTMLImageElement} The new image.\n   */\n\n  function getImageNaturalSizes(image, options, callback) {\n    var newImage = document.createElement('img'); // Modern browsers (except Safari)\n\n    if (image.naturalWidth && !IS_SAFARI) {\n      callback(image.naturalWidth, image.naturalHeight);\n      return newImage;\n    }\n\n    var body = document.body || document.documentElement;\n\n    newImage.onload = function () {\n      callback(newImage.width, newImage.height);\n\n      if (!IS_SAFARI) {\n        body.removeChild(newImage);\n      }\n    };\n\n    forEach(options.inheritedAttributes, function (name) {\n      var value = image.getAttribute(name);\n\n      if (value !== null) {\n        newImage.setAttribute(name, value);\n      }\n    });\n    newImage.src = image.src; // iOS Safari will convert the image automatically\n    // with its orientation once append it into DOM\n\n    if (!IS_SAFARI) {\n      newImage.style.cssText = 'left:0;' + 'max-height:none!important;' + 'max-width:none!important;' + 'min-height:0!important;' + 'min-width:0!important;' + 'opacity:0;' + 'position:absolute;' + 'top:0;' + 'z-index:-1;';\n      body.appendChild(newImage);\n    }\n\n    return newImage;\n  }\n  /**\n   * Get the related class name of a responsive type number.\n   * @param {string} type - The responsive type.\n   * @returns {string} The related class name.\n   */\n\n  function getResponsiveClass(type) {\n    switch (type) {\n      case 2:\n        return CLASS_HIDE_XS_DOWN;\n\n      case 3:\n        return CLASS_HIDE_SM_DOWN;\n\n      case 4:\n        return CLASS_HIDE_MD_DOWN;\n\n      default:\n        return '';\n    }\n  }\n  /**\n   * Get the max ratio of a group of pointers.\n   * @param {string} pointers - The target pointers.\n   * @returns {number} The result ratio.\n   */\n\n  function getMaxZoomRatio(pointers) {\n    var pointers2 = _objectSpread2({}, pointers);\n\n    var ratios = [];\n    forEach(pointers, function (pointer, pointerId) {\n      delete pointers2[pointerId];\n      forEach(pointers2, function (pointer2) {\n        var x1 = Math.abs(pointer.startX - pointer2.startX);\n        var y1 = Math.abs(pointer.startY - pointer2.startY);\n        var x2 = Math.abs(pointer.endX - pointer2.endX);\n        var y2 = Math.abs(pointer.endY - pointer2.endY);\n        var z1 = Math.sqrt(x1 * x1 + y1 * y1);\n        var z2 = Math.sqrt(x2 * x2 + y2 * y2);\n        var ratio = (z2 - z1) / z1;\n        ratios.push(ratio);\n      });\n    });\n    ratios.sort(function (a, b) {\n      return Math.abs(a) < Math.abs(b);\n    });\n    return ratios[0];\n  }\n  /**\n   * Get a pointer from an event object.\n   * @param {Object} event - The target event object.\n   * @param {boolean} endOnly - Indicates if only returns the end point coordinate or not.\n   * @returns {Object} The result pointer contains start and/or end point coordinates.\n   */\n\n  function getPointer(_ref2, endOnly) {\n    var pageX = _ref2.pageX,\n        pageY = _ref2.pageY;\n    var end = {\n      endX: pageX,\n      endY: pageY\n    };\n    return endOnly ? end : _objectSpread2({\n      timeStamp: Date.now(),\n      startX: pageX,\n      startY: pageY\n    }, end);\n  }\n  /**\n   * Get the center point coordinate of a group of pointers.\n   * @param {Object} pointers - The target pointers.\n   * @returns {Object} The center point coordinate.\n   */\n\n  function getPointersCenter(pointers) {\n    var pageX = 0;\n    var pageY = 0;\n    var count = 0;\n    forEach(pointers, function (_ref3) {\n      var startX = _ref3.startX,\n          startY = _ref3.startY;\n      pageX += startX;\n      pageY += startY;\n      count += 1;\n    });\n    pageX /= count;\n    pageY /= count;\n    return {\n      pageX: pageX,\n      pageY: pageY\n    };\n  }\n\n  var render = {\n    render: function render() {\n      this.initContainer();\n      this.initViewer();\n      this.initList();\n      this.renderViewer();\n    },\n    initBody: function initBody() {\n      var ownerDocument = this.element.ownerDocument;\n      var body = ownerDocument.body || ownerDocument.documentElement;\n      this.body = body;\n      this.scrollbarWidth = window.innerWidth - ownerDocument.documentElement.clientWidth;\n      this.initialBodyPaddingRight = body.style.paddingRight;\n      this.initialBodyComputedPaddingRight = window.getComputedStyle(body).paddingRight;\n    },\n    initContainer: function initContainer() {\n      this.containerData = {\n        width: window.innerWidth,\n        height: window.innerHeight\n      };\n    },\n    initViewer: function initViewer() {\n      var options = this.options,\n          parent = this.parent;\n      var viewerData;\n\n      if (options.inline) {\n        viewerData = {\n          width: Math.max(parent.offsetWidth, options.minWidth),\n          height: Math.max(parent.offsetHeight, options.minHeight)\n        };\n        this.parentData = viewerData;\n      }\n\n      if (this.fulled || !viewerData) {\n        viewerData = this.containerData;\n      }\n\n      this.viewerData = assign({}, viewerData);\n    },\n    renderViewer: function renderViewer() {\n      if (this.options.inline && !this.fulled) {\n        setStyle(this.viewer, this.viewerData);\n      }\n    },\n    initList: function initList() {\n      var _this = this;\n\n      var element = this.element,\n          options = this.options,\n          list = this.list;\n      var items = []; // initList may be called in this.update, so should keep idempotent\n\n      list.innerHTML = '';\n      forEach(this.images, function (image, index) {\n        var src = image.src;\n        var alt = image.alt || getImageNameFromURL(src);\n\n        var url = _this.getImageURL(image);\n\n        if (src || url) {\n          var item = document.createElement('li');\n          var img = document.createElement('img');\n          forEach(options.inheritedAttributes, function (name) {\n            var value = image.getAttribute(name);\n\n            if (value !== null) {\n              img.setAttribute(name, value);\n            }\n          });\n          img.src = src || url;\n          img.alt = alt;\n          img.setAttribute('data-original-url', url || src);\n          item.setAttribute('data-index', index);\n          item.setAttribute('data-viewer-action', 'view');\n          item.setAttribute('role', 'button');\n\n          if (options.keyboard) {\n            item.setAttribute('tabindex', 0);\n          }\n\n          item.appendChild(img);\n          list.appendChild(item);\n          items.push(item);\n        }\n      });\n      this.items = items;\n      forEach(items, function (item) {\n        var image = item.firstElementChild;\n        setData(image, 'filled', true);\n\n        if (options.loading) {\n          addClass(item, CLASS_LOADING);\n        }\n\n        addListener(image, EVENT_LOAD, function (event) {\n          if (options.loading) {\n            removeClass(item, CLASS_LOADING);\n          }\n\n          _this.loadImage(event);\n        }, {\n          once: true\n        });\n      });\n\n      if (options.transition) {\n        addListener(element, EVENT_VIEWED, function () {\n          addClass(list, CLASS_TRANSITION);\n        }, {\n          once: true\n        });\n      }\n    },\n    renderList: function renderList() {\n      var index = this.index;\n      var item = this.items[index];\n      var next = item.nextElementSibling;\n      var gutter = parseInt(window.getComputedStyle(next || item).marginLeft, 10);\n      var offsetWidth = item.offsetWidth;\n      var outerWidth = offsetWidth + gutter; // Place the active item in the center of the screen\n\n      setStyle(this.list, assign({\n        width: outerWidth * this.length - gutter\n      }, getTransforms({\n        translateX: (this.viewerData.width - offsetWidth) / 2 - outerWidth * index\n      })));\n    },\n    resetList: function resetList() {\n      var list = this.list;\n      list.innerHTML = '';\n      removeClass(list, CLASS_TRANSITION);\n      setStyle(list, getTransforms({\n        translateX: 0\n      }));\n    },\n    initImage: function initImage(done) {\n      var _this2 = this;\n\n      var options = this.options,\n          image = this.image,\n          viewerData = this.viewerData;\n      var footerHeight = this.footer.offsetHeight;\n      var viewerWidth = viewerData.width;\n      var viewerHeight = Math.max(viewerData.height - footerHeight, footerHeight);\n      var oldImageData = this.imageData || {};\n      var sizingImage;\n      this.imageInitializing = {\n        abort: function abort() {\n          sizingImage.onload = null;\n        }\n      };\n      sizingImage = getImageNaturalSizes(image, options, function (naturalWidth, naturalHeight) {\n        var aspectRatio = naturalWidth / naturalHeight;\n        var width = viewerWidth;\n        var height = viewerHeight;\n        _this2.imageInitializing = false;\n\n        if (viewerHeight * aspectRatio > viewerWidth) {\n          height = viewerWidth / aspectRatio;\n        } else {\n          width = viewerHeight * aspectRatio;\n        }\n\n        width = Math.min(width * 0.9, naturalWidth);\n        height = Math.min(height * 0.9, naturalHeight);\n        var left = (viewerWidth - width) / 2;\n        var top = (viewerHeight - height) / 2;\n        var imageData = {\n          left: left,\n          top: top,\n          x: left,\n          y: top,\n          width: width,\n          height: height,\n          oldRatio: 1,\n          ratio: width / naturalWidth,\n          aspectRatio: aspectRatio,\n          naturalWidth: naturalWidth,\n          naturalHeight: naturalHeight\n        };\n        var initialImageData = assign({}, imageData);\n\n        if (options.rotatable) {\n          imageData.rotate = oldImageData.rotate || 0;\n          initialImageData.rotate = 0;\n        }\n\n        if (options.scalable) {\n          imageData.scaleX = oldImageData.scaleX || 1;\n          imageData.scaleY = oldImageData.scaleY || 1;\n          initialImageData.scaleX = 1;\n          initialImageData.scaleY = 1;\n        }\n\n        _this2.imageData = imageData;\n        _this2.initialImageData = initialImageData;\n\n        if (done) {\n          done();\n        }\n      });\n    },\n    renderImage: function renderImage(done) {\n      var _this3 = this;\n\n      var image = this.image,\n          imageData = this.imageData;\n      setStyle(image, assign({\n        width: imageData.width,\n        height: imageData.height,\n        // XXX: Not to use translateX/Y to avoid image shaking when zooming\n        marginLeft: imageData.x,\n        marginTop: imageData.y\n      }, getTransforms(imageData)));\n\n      if (done) {\n        if ((this.viewing || this.moving || this.rotating || this.scaling || this.zooming) && this.options.transition && hasClass(image, CLASS_TRANSITION)) {\n          var onTransitionEnd = function onTransitionEnd() {\n            _this3.imageRendering = false;\n            done();\n          };\n\n          this.imageRendering = {\n            abort: function abort() {\n              removeListener(image, EVENT_TRANSITION_END, onTransitionEnd);\n            }\n          };\n          addListener(image, EVENT_TRANSITION_END, onTransitionEnd, {\n            once: true\n          });\n        } else {\n          done();\n        }\n      }\n    },\n    resetImage: function resetImage() {\n      // this.image only defined after viewed\n      if (this.viewing || this.viewed) {\n        var image = this.image;\n\n        if (this.viewing) {\n          this.viewing.abort();\n        }\n\n        image.parentNode.removeChild(image);\n        this.image = null;\n      }\n    }\n  };\n\n  var events = {\n    bind: function bind() {\n      var options = this.options,\n          viewer = this.viewer,\n          canvas = this.canvas;\n      var document = this.element.ownerDocument;\n      addListener(viewer, EVENT_CLICK, this.onClick = this.click.bind(this));\n      addListener(viewer, EVENT_DRAG_START, this.onDragStart = this.dragstart.bind(this));\n      addListener(canvas, EVENT_POINTER_DOWN, this.onPointerDown = this.pointerdown.bind(this));\n      addListener(document, EVENT_POINTER_MOVE, this.onPointerMove = this.pointermove.bind(this));\n      addListener(document, EVENT_POINTER_UP, this.onPointerUp = this.pointerup.bind(this));\n      addListener(document, EVENT_KEY_DOWN, this.onKeyDown = this.keydown.bind(this));\n      addListener(window, EVENT_RESIZE, this.onResize = this.resize.bind(this));\n\n      if (options.zoomable && options.zoomOnWheel) {\n        addListener(viewer, EVENT_WHEEL, this.onWheel = this.wheel.bind(this), {\n          passive: false,\n          capture: true\n        });\n      }\n\n      if (options.toggleOnDblclick) {\n        addListener(canvas, EVENT_DBLCLICK, this.onDblclick = this.dblclick.bind(this));\n      }\n    },\n    unbind: function unbind() {\n      var options = this.options,\n          viewer = this.viewer,\n          canvas = this.canvas;\n      var document = this.element.ownerDocument;\n      removeListener(viewer, EVENT_CLICK, this.onClick);\n      removeListener(viewer, EVENT_DRAG_START, this.onDragStart);\n      removeListener(canvas, EVENT_POINTER_DOWN, this.onPointerDown);\n      removeListener(document, EVENT_POINTER_MOVE, this.onPointerMove);\n      removeListener(document, EVENT_POINTER_UP, this.onPointerUp);\n      removeListener(document, EVENT_KEY_DOWN, this.onKeyDown);\n      removeListener(window, EVENT_RESIZE, this.onResize);\n\n      if (options.zoomable && options.zoomOnWheel) {\n        removeListener(viewer, EVENT_WHEEL, this.onWheel, {\n          passive: false,\n          capture: true\n        });\n      }\n\n      if (options.toggleOnDblclick) {\n        removeListener(canvas, EVENT_DBLCLICK, this.onDblclick);\n      }\n    }\n  };\n\n  var handlers = {\n    click: function click(event) {\n      var options = this.options,\n          imageData = this.imageData;\n      var target = event.target;\n      var action = getData(target, DATA_ACTION);\n\n      if (!action && target.localName === 'img' && target.parentElement.localName === 'li') {\n        target = target.parentElement;\n        action = getData(target, DATA_ACTION);\n      } // Cancel the emulated click when the native click event was triggered.\n\n\n      if (IS_TOUCH_DEVICE && event.isTrusted && target === this.canvas) {\n        clearTimeout(this.clickCanvasTimeout);\n      }\n\n      switch (action) {\n        case 'mix':\n          if (this.played) {\n            this.stop();\n          } else if (options.inline) {\n            if (this.fulled) {\n              this.exit();\n            } else {\n              this.full();\n            }\n          } else {\n            this.hide();\n          }\n\n          break;\n\n        case 'hide':\n          this.hide();\n          break;\n\n        case 'view':\n          this.view(getData(target, 'index'));\n          break;\n\n        case 'zoom-in':\n          this.zoom(0.1, true);\n          break;\n\n        case 'zoom-out':\n          this.zoom(-0.1, true);\n          break;\n\n        case 'one-to-one':\n          this.toggle();\n          break;\n\n        case 'reset':\n          this.reset();\n          break;\n\n        case 'prev':\n          this.prev(options.loop);\n          break;\n\n        case 'play':\n          this.play(options.fullscreen);\n          break;\n\n        case 'next':\n          this.next(options.loop);\n          break;\n\n        case 'rotate-left':\n          this.rotate(-90);\n          break;\n\n        case 'rotate-right':\n          this.rotate(90);\n          break;\n\n        case 'flip-horizontal':\n          this.scaleX(-imageData.scaleX || -1);\n          break;\n\n        case 'flip-vertical':\n          this.scaleY(-imageData.scaleY || -1);\n          break;\n\n        default:\n          if (this.played) {\n            this.stop();\n          }\n\n      }\n    },\n    dblclick: function dblclick(event) {\n      event.preventDefault();\n\n      if (this.viewed && event.target === this.image) {\n        // Cancel the emulated double click when the native dblclick event was triggered.\n        if (IS_TOUCH_DEVICE && event.isTrusted) {\n          clearTimeout(this.doubleClickImageTimeout);\n        }\n\n        this.toggle(event);\n      }\n    },\n    load: function load() {\n      var _this = this;\n\n      if (this.timeout) {\n        clearTimeout(this.timeout);\n        this.timeout = false;\n      }\n\n      var element = this.element,\n          options = this.options,\n          image = this.image,\n          index = this.index,\n          viewerData = this.viewerData;\n      removeClass(image, CLASS_INVISIBLE);\n\n      if (options.loading) {\n        removeClass(this.canvas, CLASS_LOADING);\n      }\n\n      image.style.cssText = 'height:0;' + \"margin-left:\".concat(viewerData.width / 2, \"px;\") + \"margin-top:\".concat(viewerData.height / 2, \"px;\") + 'max-width:none!important;' + 'position:relative;' + 'width:0;';\n      this.initImage(function () {\n        toggleClass(image, CLASS_MOVE, options.movable);\n        toggleClass(image, CLASS_TRANSITION, options.transition);\n\n        _this.renderImage(function () {\n          _this.viewed = true;\n          _this.viewing = false;\n\n          if (isFunction(options.viewed)) {\n            addListener(element, EVENT_VIEWED, options.viewed, {\n              once: true\n            });\n          }\n\n          dispatchEvent(element, EVENT_VIEWED, {\n            originalImage: _this.images[index],\n            index: index,\n            image: image\n          }, {\n            cancelable: false\n          });\n        });\n      });\n    },\n    loadImage: function loadImage(event) {\n      var image = event.target;\n      var parent = image.parentNode;\n      var parentWidth = parent.offsetWidth || 30;\n      var parentHeight = parent.offsetHeight || 50;\n      var filled = !!getData(image, 'filled');\n      getImageNaturalSizes(image, this.options, function (naturalWidth, naturalHeight) {\n        var aspectRatio = naturalWidth / naturalHeight;\n        var width = parentWidth;\n        var height = parentHeight;\n\n        if (parentHeight * aspectRatio > parentWidth) {\n          if (filled) {\n            width = parentHeight * aspectRatio;\n          } else {\n            height = parentWidth / aspectRatio;\n          }\n        } else if (filled) {\n          height = parentWidth / aspectRatio;\n        } else {\n          width = parentHeight * aspectRatio;\n        }\n\n        setStyle(image, assign({\n          width: width,\n          height: height\n        }, getTransforms({\n          translateX: (parentWidth - width) / 2,\n          translateY: (parentHeight - height) / 2\n        })));\n      });\n    },\n    keydown: function keydown(event) {\n      var options = this.options;\n\n      if (!options.keyboard) {\n        return;\n      }\n\n      var keyCode = event.keyCode || event.which || event.charCode;\n\n      switch (keyCode) {\n        // Enter\n        case 13:\n          if (this.viewer.contains(event.target)) {\n            this.click(event);\n          }\n\n          break;\n      }\n\n      if (!this.fulled) {\n        return;\n      }\n\n      switch (keyCode) {\n        // Escape\n        case 27:\n          if (this.played) {\n            this.stop();\n          } else if (options.inline) {\n            if (this.fulled) {\n              this.exit();\n            }\n          } else {\n            this.hide();\n          }\n\n          break;\n        // Space\n\n        case 32:\n          if (this.played) {\n            this.stop();\n          }\n\n          break;\n        // ArrowLeft\n\n        case 37:\n          this.prev(options.loop);\n          break;\n        // ArrowUp\n\n        case 38:\n          // Prevent scroll on Firefox\n          event.preventDefault(); // Zoom in\n\n          this.zoom(options.zoomRatio, true);\n          break;\n        // ArrowRight\n\n        case 39:\n          this.next(options.loop);\n          break;\n        // ArrowDown\n\n        case 40:\n          // Prevent scroll on Firefox\n          event.preventDefault(); // Zoom out\n\n          this.zoom(-options.zoomRatio, true);\n          break;\n        // Ctrl + 0\n\n        case 48: // Fall through\n        // Ctrl + 1\n        // eslint-disable-next-line no-fallthrough\n\n        case 49:\n          if (event.ctrlKey) {\n            event.preventDefault();\n            this.toggle();\n          }\n\n          break;\n      }\n    },\n    dragstart: function dragstart(event) {\n      if (event.target.localName === 'img') {\n        event.preventDefault();\n      }\n    },\n    pointerdown: function pointerdown(event) {\n      var options = this.options,\n          pointers = this.pointers;\n      var buttons = event.buttons,\n          button = event.button;\n\n      if (!this.viewed || this.showing || this.viewing || this.hiding // Handle mouse event and pointer event and ignore touch event\n      || (event.type === 'mousedown' || event.type === 'pointerdown' && event.pointerType === 'mouse') && ( // No primary button (Usually the left button)\n      isNumber(buttons) && buttons !== 1 || isNumber(button) && button !== 0 // Open context menu\n      || event.ctrlKey)) {\n        return;\n      } // Prevent default behaviours as page zooming in touch devices.\n\n\n      event.preventDefault();\n\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          pointers[touch.identifier] = getPointer(touch);\n        });\n      } else {\n        pointers[event.pointerId || 0] = getPointer(event);\n      }\n\n      var action = options.movable ? ACTION_MOVE : false;\n\n      if (options.zoomOnTouch && options.zoomable && Object.keys(pointers).length > 1) {\n        action = ACTION_ZOOM;\n      } else if (options.slideOnTouch && (event.pointerType === 'touch' || event.type === 'touchstart') && this.isSwitchable()) {\n        action = ACTION_SWITCH;\n      }\n\n      if (options.transition && (action === ACTION_MOVE || action === ACTION_ZOOM)) {\n        removeClass(this.image, CLASS_TRANSITION);\n      }\n\n      this.action = action;\n    },\n    pointermove: function pointermove(event) {\n      var pointers = this.pointers,\n          action = this.action;\n\n      if (!this.viewed || !action) {\n        return;\n      }\n\n      event.preventDefault();\n\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          assign(pointers[touch.identifier] || {}, getPointer(touch, true));\n        });\n      } else {\n        assign(pointers[event.pointerId || 0] || {}, getPointer(event, true));\n      }\n\n      this.change(event);\n    },\n    pointerup: function pointerup(event) {\n      var _this2 = this;\n\n      var options = this.options,\n          action = this.action,\n          pointers = this.pointers;\n      var pointer;\n\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          pointer = pointers[touch.identifier];\n          delete pointers[touch.identifier];\n        });\n      } else {\n        pointer = pointers[event.pointerId || 0];\n        delete pointers[event.pointerId || 0];\n      }\n\n      if (!action) {\n        return;\n      }\n\n      event.preventDefault();\n\n      if (options.transition && (action === ACTION_MOVE || action === ACTION_ZOOM)) {\n        addClass(this.image, CLASS_TRANSITION);\n      }\n\n      this.action = false; // Emulate click and double click in touch devices to support backdrop and image zooming (#210).\n\n      if (IS_TOUCH_DEVICE && action !== ACTION_ZOOM && pointer && Date.now() - pointer.timeStamp < 500) {\n        clearTimeout(this.clickCanvasTimeout);\n        clearTimeout(this.doubleClickImageTimeout);\n\n        if (options.toggleOnDblclick && this.viewed && event.target === this.image) {\n          if (this.imageClicked) {\n            this.imageClicked = false; // This timeout will be cleared later when a native dblclick event is triggering\n\n            this.doubleClickImageTimeout = setTimeout(function () {\n              dispatchEvent(_this2.image, EVENT_DBLCLICK);\n            }, 50);\n          } else {\n            this.imageClicked = true; // The default timing of a double click in Windows is 500 ms\n\n            this.doubleClickImageTimeout = setTimeout(function () {\n              _this2.imageClicked = false;\n            }, 500);\n          }\n        } else {\n          this.imageClicked = false;\n\n          if (options.backdrop && options.backdrop !== 'static' && event.target === this.canvas) {\n            // This timeout will be cleared later when a native click event is triggering\n            this.clickCanvasTimeout = setTimeout(function () {\n              dispatchEvent(_this2.canvas, EVENT_CLICK);\n            }, 50);\n          }\n        }\n      }\n    },\n    resize: function resize() {\n      var _this3 = this;\n\n      if (!this.isShown || this.hiding) {\n        return;\n      }\n\n      if (this.fulled) {\n        this.close();\n        this.initBody();\n        this.open();\n      }\n\n      this.initContainer();\n      this.initViewer();\n      this.renderViewer();\n      this.renderList();\n\n      if (this.viewed) {\n        this.initImage(function () {\n          _this3.renderImage();\n        });\n      }\n\n      if (this.played) {\n        if (this.options.fullscreen && this.fulled && !(document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement)) {\n          this.stop();\n          return;\n        }\n\n        forEach(this.player.getElementsByTagName('img'), function (image) {\n          addListener(image, EVENT_LOAD, _this3.loadImage.bind(_this3), {\n            once: true\n          });\n          dispatchEvent(image, EVENT_LOAD);\n        });\n      }\n    },\n    wheel: function wheel(event) {\n      var _this4 = this;\n\n      if (!this.viewed) {\n        return;\n      }\n\n      event.preventDefault(); // Limit wheel speed to prevent zoom too fast\n\n      if (this.wheeling) {\n        return;\n      }\n\n      this.wheeling = true;\n      setTimeout(function () {\n        _this4.wheeling = false;\n      }, 50);\n      var ratio = Number(this.options.zoomRatio) || 0.1;\n      var delta = 1;\n\n      if (event.deltaY) {\n        delta = event.deltaY > 0 ? 1 : -1;\n      } else if (event.wheelDelta) {\n        delta = -event.wheelDelta / 120;\n      } else if (event.detail) {\n        delta = event.detail > 0 ? 1 : -1;\n      }\n\n      this.zoom(-delta * ratio, true, event);\n    }\n  };\n\n  var methods = {\n    /** Show the viewer (only available in modal mode)\n     * @param {boolean} [immediate=false] - Indicates if show the viewer immediately or not.\n     * @returns {Viewer} this\n     */\n    show: function show() {\n      var immediate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var element = this.element,\n          options = this.options;\n\n      if (options.inline || this.showing || this.isShown || this.showing) {\n        return this;\n      }\n\n      if (!this.ready) {\n        this.build();\n\n        if (this.ready) {\n          this.show(immediate);\n        }\n\n        return this;\n      }\n\n      if (isFunction(options.show)) {\n        addListener(element, EVENT_SHOW, options.show, {\n          once: true\n        });\n      }\n\n      if (dispatchEvent(element, EVENT_SHOW) === false || !this.ready) {\n        return this;\n      }\n\n      if (this.hiding) {\n        this.transitioning.abort();\n      }\n\n      this.showing = true;\n      this.open();\n      var viewer = this.viewer;\n      removeClass(viewer, CLASS_HIDE);\n      viewer.setAttribute('role', 'dialog');\n      viewer.setAttribute('aria-labelledby', this.title.id);\n      viewer.setAttribute('aria-modal', true);\n      viewer.removeAttribute('aria-hidden');\n\n      if (options.transition && !immediate) {\n        var shown = this.shown.bind(this);\n        this.transitioning = {\n          abort: function abort() {\n            removeListener(viewer, EVENT_TRANSITION_END, shown);\n            removeClass(viewer, CLASS_IN);\n          }\n        };\n        addClass(viewer, CLASS_TRANSITION); // Force reflow to enable CSS3 transition\n\n        viewer.initialOffsetWidth = viewer.offsetWidth;\n        addListener(viewer, EVENT_TRANSITION_END, shown, {\n          once: true\n        });\n        addClass(viewer, CLASS_IN);\n      } else {\n        addClass(viewer, CLASS_IN);\n        this.shown();\n      }\n\n      return this;\n    },\n\n    /**\n     * Hide the viewer (only available in modal mode)\n     * @param {boolean} [immediate=false] - Indicates if hide the viewer immediately or not.\n     * @returns {Viewer} this\n     */\n    hide: function hide() {\n      var _this = this;\n\n      var immediate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var element = this.element,\n          options = this.options;\n\n      if (options.inline || this.hiding || !(this.isShown || this.showing)) {\n        return this;\n      }\n\n      if (isFunction(options.hide)) {\n        addListener(element, EVENT_HIDE, options.hide, {\n          once: true\n        });\n      }\n\n      if (dispatchEvent(element, EVENT_HIDE) === false) {\n        return this;\n      }\n\n      if (this.showing) {\n        this.transitioning.abort();\n      }\n\n      this.hiding = true;\n\n      if (this.played) {\n        this.stop();\n      } else if (this.viewing) {\n        this.viewing.abort();\n      }\n\n      var viewer = this.viewer,\n          image = this.image;\n\n      var hideImmediately = function hideImmediately() {\n        removeClass(viewer, CLASS_IN);\n\n        _this.hidden();\n      };\n\n      if (options.transition && !immediate) {\n        var onViewerTransitionEnd = function onViewerTransitionEnd(event) {\n          // Ignore all propagating `transitionend` events (#275).\n          if (event && event.target === viewer) {\n            removeListener(viewer, EVENT_TRANSITION_END, onViewerTransitionEnd);\n\n            _this.hidden();\n          }\n        };\n\n        var onImageTransitionEnd = function onImageTransitionEnd() {\n          // In case of show the viewer by `viewer.show(true)` previously (#407).\n          if (hasClass(viewer, CLASS_TRANSITION)) {\n            addListener(viewer, EVENT_TRANSITION_END, onViewerTransitionEnd);\n            removeClass(viewer, CLASS_IN);\n          } else {\n            hideImmediately();\n          }\n        };\n\n        this.transitioning = {\n          abort: function abort() {\n            if (_this.viewed && hasClass(image, CLASS_TRANSITION)) {\n              removeListener(image, EVENT_TRANSITION_END, onImageTransitionEnd);\n            } else if (hasClass(viewer, CLASS_TRANSITION)) {\n              removeListener(viewer, EVENT_TRANSITION_END, onViewerTransitionEnd);\n            }\n          }\n        }; // In case of hiding the viewer when holding on the image (#255),\n        // note that the `CLASS_TRANSITION` class will be removed on pointer down.\n\n        if (this.viewed && hasClass(image, CLASS_TRANSITION)) {\n          addListener(image, EVENT_TRANSITION_END, onImageTransitionEnd, {\n            once: true\n          });\n          this.zoomTo(0, false, null, true);\n        } else {\n          onImageTransitionEnd();\n        }\n      } else {\n        hideImmediately();\n      }\n\n      return this;\n    },\n\n    /**\n     * View one of the images with image's index\n     * @param {number} index - The index of the image to view.\n     * @returns {Viewer} this\n     */\n    view: function view() {\n      var _this2 = this;\n\n      var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.options.initialViewIndex;\n      index = Number(index) || 0;\n\n      if (this.hiding || this.played || index < 0 || index >= this.length || this.viewed && index === this.index) {\n        return this;\n      }\n\n      if (!this.isShown) {\n        this.index = index;\n        return this.show();\n      }\n\n      if (this.viewing) {\n        this.viewing.abort();\n      }\n\n      var element = this.element,\n          options = this.options,\n          title = this.title,\n          canvas = this.canvas;\n      var item = this.items[index];\n      var img = item.querySelector('img');\n      var url = getData(img, 'originalUrl');\n      var alt = img.getAttribute('alt');\n      var image = document.createElement('img');\n      forEach(options.inheritedAttributes, function (name) {\n        var value = img.getAttribute(name);\n\n        if (value !== null) {\n          image.setAttribute(name, value);\n        }\n      });\n      image.src = url;\n      image.alt = alt;\n\n      if (isFunction(options.view)) {\n        addListener(element, EVENT_VIEW, options.view, {\n          once: true\n        });\n      }\n\n      if (dispatchEvent(element, EVENT_VIEW, {\n        originalImage: this.images[index],\n        index: index,\n        image: image\n      }) === false || !this.isShown || this.hiding || this.played) {\n        return this;\n      }\n\n      var activeItem = this.items[this.index];\n\n      if (activeItem) {\n        removeClass(activeItem, CLASS_ACTIVE);\n        activeItem.removeAttribute('aria-selected');\n      }\n\n      addClass(item, CLASS_ACTIVE);\n      item.setAttribute('aria-selected', true);\n\n      if (options.focus) {\n        item.focus();\n      }\n\n      this.image = image;\n      this.viewed = false;\n      this.index = index;\n      this.imageData = {};\n      addClass(image, CLASS_INVISIBLE);\n\n      if (options.loading) {\n        addClass(canvas, CLASS_LOADING);\n      }\n\n      canvas.innerHTML = '';\n      canvas.appendChild(image); // Center current item\n\n      this.renderList(); // Clear title\n\n      title.innerHTML = ''; // Generate title after viewed\n\n      var onViewed = function onViewed() {\n        var imageData = _this2.imageData;\n        var render = Array.isArray(options.title) ? options.title[1] : options.title;\n        title.innerHTML = escapeHTMLEntities(isFunction(render) ? render.call(_this2, image, imageData) : \"\".concat(alt, \" (\").concat(imageData.naturalWidth, \" \\xD7 \").concat(imageData.naturalHeight, \")\"));\n      };\n\n      var onLoad;\n      addListener(element, EVENT_VIEWED, onViewed, {\n        once: true\n      });\n      this.viewing = {\n        abort: function abort() {\n          removeListener(element, EVENT_VIEWED, onViewed);\n\n          if (image.complete) {\n            if (_this2.imageRendering) {\n              _this2.imageRendering.abort();\n            } else if (_this2.imageInitializing) {\n              _this2.imageInitializing.abort();\n            }\n          } else {\n            // Cancel download to save bandwidth.\n            image.src = '';\n            removeListener(image, EVENT_LOAD, onLoad);\n\n            if (_this2.timeout) {\n              clearTimeout(_this2.timeout);\n            }\n          }\n        }\n      };\n\n      if (image.complete) {\n        this.load();\n      } else {\n        addListener(image, EVENT_LOAD, onLoad = this.load.bind(this), {\n          once: true\n        });\n\n        if (this.timeout) {\n          clearTimeout(this.timeout);\n        } // Make the image visible if it fails to load within 1s\n\n\n        this.timeout = setTimeout(function () {\n          removeClass(image, CLASS_INVISIBLE);\n          _this2.timeout = false;\n        }, 1000);\n      }\n\n      return this;\n    },\n\n    /**\n     * View the previous image\n     * @param {boolean} [loop=false] - Indicate if view the last one\n     * when it is the first one at present.\n     * @returns {Viewer} this\n     */\n    prev: function prev() {\n      var loop = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var index = this.index - 1;\n\n      if (index < 0) {\n        index = loop ? this.length - 1 : 0;\n      }\n\n      this.view(index);\n      return this;\n    },\n\n    /**\n     * View the next image\n     * @param {boolean} [loop=false] - Indicate if view the first one\n     * when it is the last one at present.\n     * @returns {Viewer} this\n     */\n    next: function next() {\n      var loop = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var maxIndex = this.length - 1;\n      var index = this.index + 1;\n\n      if (index > maxIndex) {\n        index = loop ? 0 : maxIndex;\n      }\n\n      this.view(index);\n      return this;\n    },\n\n    /**\n     * Move the image with relative offsets.\n     * @param {number} x - The moving distance in the horizontal direction.\n     * @param {number} [y=x] The moving distance in the vertical direction.\n     * @returns {Viewer} this\n     */\n    move: function move(x) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : x;\n      var imageData = this.imageData;\n      this.moveTo(isUndefined(x) ? x : imageData.x + Number(x), isUndefined(y) ? y : imageData.y + Number(y));\n      return this;\n    },\n\n    /**\n     * Move the image to an absolute point.\n     * @param {number} x - The new position in the horizontal direction.\n     * @param {number} [y=x] - The new position in the vertical direction.\n     * @param {Event} [_originalEvent=null] - The original event if any.\n     * @returns {Viewer} this\n     */\n    moveTo: function moveTo(x) {\n      var _this3 = this;\n\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : x;\n\n      var _originalEvent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n      var element = this.element,\n          options = this.options,\n          imageData = this.imageData;\n      x = Number(x);\n      y = Number(y);\n\n      if (this.viewed && !this.played && options.movable) {\n        var oldX = imageData.x;\n        var oldY = imageData.y;\n        var changed = false;\n\n        if (isNumber(x)) {\n          changed = true;\n        } else {\n          x = oldX;\n        }\n\n        if (isNumber(y)) {\n          changed = true;\n        } else {\n          y = oldY;\n        }\n\n        if (changed) {\n          if (isFunction(options.move)) {\n            addListener(element, EVENT_MOVE, options.move, {\n              once: true\n            });\n          }\n\n          if (dispatchEvent(element, EVENT_MOVE, {\n            x: x,\n            y: y,\n            oldX: oldX,\n            oldY: oldY,\n            originalEvent: _originalEvent\n          }) === false) {\n            return this;\n          }\n\n          imageData.x = x;\n          imageData.y = y;\n          imageData.left = x;\n          imageData.top = y;\n          this.moving = true;\n          this.renderImage(function () {\n            _this3.moving = false;\n\n            if (isFunction(options.moved)) {\n              addListener(element, EVENT_MOVED, options.moved, {\n                once: true\n              });\n            }\n\n            dispatchEvent(element, EVENT_MOVED, {\n              x: x,\n              y: y,\n              oldX: oldX,\n              oldY: oldY,\n              originalEvent: _originalEvent\n            }, {\n              cancelable: false\n            });\n          });\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Rotate the image with a relative degree.\n     * @param {number} degree - The rotate degree.\n     * @returns {Viewer} this\n     */\n    rotate: function rotate(degree) {\n      this.rotateTo((this.imageData.rotate || 0) + Number(degree));\n      return this;\n    },\n\n    /**\n     * Rotate the image to an absolute degree.\n     * @param {number} degree - The rotate degree.\n     * @returns {Viewer} this\n     */\n    rotateTo: function rotateTo(degree) {\n      var _this4 = this;\n\n      var element = this.element,\n          options = this.options,\n          imageData = this.imageData;\n      degree = Number(degree);\n\n      if (isNumber(degree) && this.viewed && !this.played && options.rotatable) {\n        var oldDegree = imageData.rotate;\n\n        if (isFunction(options.rotate)) {\n          addListener(element, EVENT_ROTATE, options.rotate, {\n            once: true\n          });\n        }\n\n        if (dispatchEvent(element, EVENT_ROTATE, {\n          degree: degree,\n          oldDegree: oldDegree\n        }) === false) {\n          return this;\n        }\n\n        imageData.rotate = degree;\n        this.rotating = true;\n        this.renderImage(function () {\n          _this4.rotating = false;\n\n          if (isFunction(options.rotated)) {\n            addListener(element, EVENT_ROTATED, options.rotated, {\n              once: true\n            });\n          }\n\n          dispatchEvent(element, EVENT_ROTATED, {\n            degree: degree,\n            oldDegree: oldDegree\n          }, {\n            cancelable: false\n          });\n        });\n      }\n\n      return this;\n    },\n\n    /**\n     * Scale the image on the x-axis.\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @returns {Viewer} this\n     */\n    scaleX: function scaleX(_scaleX) {\n      this.scale(_scaleX, this.imageData.scaleY);\n      return this;\n    },\n\n    /**\n     * Scale the image on the y-axis.\n     * @param {number} scaleY - The scale ratio on the y-axis.\n     * @returns {Viewer} this\n     */\n    scaleY: function scaleY(_scaleY) {\n      this.scale(this.imageData.scaleX, _scaleY);\n      return this;\n    },\n\n    /**\n     * Scale the image.\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @param {number} [scaleY=scaleX] - The scale ratio on the y-axis.\n     * @returns {Viewer} this\n     */\n    scale: function scale(scaleX) {\n      var _this5 = this;\n\n      var scaleY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : scaleX;\n      var element = this.element,\n          options = this.options,\n          imageData = this.imageData;\n      scaleX = Number(scaleX);\n      scaleY = Number(scaleY);\n\n      if (this.viewed && !this.played && options.scalable) {\n        var oldScaleX = imageData.scaleX;\n        var oldScaleY = imageData.scaleY;\n        var changed = false;\n\n        if (isNumber(scaleX)) {\n          changed = true;\n        } else {\n          scaleX = oldScaleX;\n        }\n\n        if (isNumber(scaleY)) {\n          changed = true;\n        } else {\n          scaleY = oldScaleY;\n        }\n\n        if (changed) {\n          if (isFunction(options.scale)) {\n            addListener(element, EVENT_SCALE, options.scale, {\n              once: true\n            });\n          }\n\n          if (dispatchEvent(element, EVENT_SCALE, {\n            scaleX: scaleX,\n            scaleY: scaleY,\n            oldScaleX: oldScaleX,\n            oldScaleY: oldScaleY\n          }) === false) {\n            return this;\n          }\n\n          imageData.scaleX = scaleX;\n          imageData.scaleY = scaleY;\n          this.scaling = true;\n          this.renderImage(function () {\n            _this5.scaling = false;\n\n            if (isFunction(options.scaled)) {\n              addListener(element, EVENT_SCALED, options.scaled, {\n                once: true\n              });\n            }\n\n            dispatchEvent(element, EVENT_SCALED, {\n              scaleX: scaleX,\n              scaleY: scaleY,\n              oldScaleX: oldScaleX,\n              oldScaleY: oldScaleY\n            }, {\n              cancelable: false\n            });\n          });\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Zoom the image with a relative ratio.\n     * @param {number} ratio - The target ratio.\n     * @param {boolean} [hasTooltip=false] - Indicates if it has a tooltip or not.\n     * @param {Event} [_originalEvent=null] - The original event if any.\n     * @returns {Viewer} this\n     */\n    zoom: function zoom(ratio) {\n      var hasTooltip = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      var _originalEvent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n      var imageData = this.imageData;\n      ratio = Number(ratio);\n\n      if (ratio < 0) {\n        ratio = 1 / (1 - ratio);\n      } else {\n        ratio = 1 + ratio;\n      }\n\n      this.zoomTo(imageData.width * ratio / imageData.naturalWidth, hasTooltip, _originalEvent);\n      return this;\n    },\n\n    /**\n     * Zoom the image to an absolute ratio.\n     * @param {number} ratio - The target ratio.\n     * @param {boolean} [hasTooltip=false] - Indicates if it has a tooltip or not.\n     * @param {Event} [_originalEvent=null] - The original event if any.\n     * @param {Event} [_zoomable=false] - Indicates if the current zoom is available or not.\n     * @returns {Viewer} this\n     */\n    zoomTo: function zoomTo(ratio) {\n      var _this6 = this;\n\n      var hasTooltip = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      var _originalEvent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n      var _zoomable = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n      var element = this.element,\n          options = this.options,\n          pointers = this.pointers,\n          imageData = this.imageData;\n      var x = imageData.x,\n          y = imageData.y,\n          width = imageData.width,\n          height = imageData.height,\n          naturalWidth = imageData.naturalWidth,\n          naturalHeight = imageData.naturalHeight;\n      ratio = Math.max(0, ratio);\n\n      if (isNumber(ratio) && this.viewed && !this.played && (_zoomable || options.zoomable)) {\n        if (!_zoomable) {\n          var minZoomRatio = Math.max(0.01, options.minZoomRatio);\n          var maxZoomRatio = Math.min(100, options.maxZoomRatio);\n          ratio = Math.min(Math.max(ratio, minZoomRatio), maxZoomRatio);\n        }\n\n        if (_originalEvent && options.zoomRatio >= 0.055 && ratio > 0.95 && ratio < 1.05) {\n          ratio = 1;\n        }\n\n        var newWidth = naturalWidth * ratio;\n        var newHeight = naturalHeight * ratio;\n        var offsetWidth = newWidth - width;\n        var offsetHeight = newHeight - height;\n        var oldRatio = imageData.ratio;\n\n        if (isFunction(options.zoom)) {\n          addListener(element, EVENT_ZOOM, options.zoom, {\n            once: true\n          });\n        }\n\n        if (dispatchEvent(element, EVENT_ZOOM, {\n          ratio: ratio,\n          oldRatio: oldRatio,\n          originalEvent: _originalEvent\n        }) === false) {\n          return this;\n        }\n\n        this.zooming = true;\n\n        if (_originalEvent) {\n          var offset = getOffset(this.viewer);\n          var center = pointers && Object.keys(pointers).length ? getPointersCenter(pointers) : {\n            pageX: _originalEvent.pageX,\n            pageY: _originalEvent.pageY\n          }; // Zoom from the triggering point of the event\n\n          imageData.x -= offsetWidth * ((center.pageX - offset.left - x) / width);\n          imageData.y -= offsetHeight * ((center.pageY - offset.top - y) / height);\n        } else {\n          // Zoom from the center of the image\n          imageData.x -= offsetWidth / 2;\n          imageData.y -= offsetHeight / 2;\n        }\n\n        imageData.left = imageData.x;\n        imageData.top = imageData.y;\n        imageData.width = newWidth;\n        imageData.height = newHeight;\n        imageData.oldRatio = oldRatio;\n        imageData.ratio = ratio;\n        this.renderImage(function () {\n          _this6.zooming = false;\n\n          if (isFunction(options.zoomed)) {\n            addListener(element, EVENT_ZOOMED, options.zoomed, {\n              once: true\n            });\n          }\n\n          dispatchEvent(element, EVENT_ZOOMED, {\n            ratio: ratio,\n            oldRatio: oldRatio,\n            originalEvent: _originalEvent\n          }, {\n            cancelable: false\n          });\n        });\n\n        if (hasTooltip) {\n          this.tooltip();\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Play the images\n     * @param {boolean|FullscreenOptions} [fullscreen=false] - Indicate if request fullscreen or not.\n     * @returns {Viewer} this\n     */\n    play: function play() {\n      var _this7 = this;\n\n      var fullscreen = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      if (!this.isShown || this.played) {\n        return this;\n      }\n\n      var element = this.element,\n          options = this.options;\n\n      if (isFunction(options.play)) {\n        addListener(element, EVENT_PLAY, options.play, {\n          once: true\n        });\n      }\n\n      if (dispatchEvent(element, EVENT_PLAY) === false) {\n        return this;\n      }\n\n      var player = this.player;\n      var onLoad = this.loadImage.bind(this);\n      var list = [];\n      var total = 0;\n      var index = 0;\n      this.played = true;\n      this.onLoadWhenPlay = onLoad;\n\n      if (fullscreen) {\n        this.requestFullscreen(fullscreen);\n      }\n\n      addClass(player, CLASS_SHOW);\n      forEach(this.items, function (item, i) {\n        var img = item.querySelector('img');\n        var image = document.createElement('img');\n        image.src = getData(img, 'originalUrl');\n        image.alt = img.getAttribute('alt');\n        image.referrerPolicy = img.referrerPolicy;\n        total += 1;\n        addClass(image, CLASS_FADE);\n        toggleClass(image, CLASS_TRANSITION, options.transition);\n\n        if (hasClass(item, CLASS_ACTIVE)) {\n          addClass(image, CLASS_IN);\n          index = i;\n        }\n\n        list.push(image);\n        addListener(image, EVENT_LOAD, onLoad, {\n          once: true\n        });\n        player.appendChild(image);\n      });\n\n      if (isNumber(options.interval) && options.interval > 0) {\n        var play = function play() {\n          _this7.playing = setTimeout(function () {\n            removeClass(list[index], CLASS_IN);\n            index += 1;\n            index = index < total ? index : 0;\n            addClass(list[index], CLASS_IN);\n            play();\n          }, options.interval);\n        };\n\n        if (total > 1) {\n          play();\n        }\n      }\n\n      return this;\n    },\n    // Stop play\n    stop: function stop() {\n      var _this8 = this;\n\n      if (!this.played) {\n        return this;\n      }\n\n      var element = this.element,\n          options = this.options;\n\n      if (isFunction(options.stop)) {\n        addListener(element, EVENT_STOP, options.stop, {\n          once: true\n        });\n      }\n\n      if (dispatchEvent(element, EVENT_STOP) === false) {\n        return this;\n      }\n\n      var player = this.player;\n      this.played = false;\n      clearTimeout(this.playing);\n      forEach(player.getElementsByTagName('img'), function (image) {\n        removeListener(image, EVENT_LOAD, _this8.onLoadWhenPlay);\n      });\n      removeClass(player, CLASS_SHOW);\n      player.innerHTML = '';\n      this.exitFullscreen();\n      return this;\n    },\n    // Enter modal mode (only available in inline mode)\n    full: function full() {\n      var _this9 = this;\n\n      var options = this.options,\n          viewer = this.viewer,\n          image = this.image,\n          list = this.list;\n\n      if (!this.isShown || this.played || this.fulled || !options.inline) {\n        return this;\n      }\n\n      this.fulled = true;\n      this.open();\n      addClass(this.button, CLASS_FULLSCREEN_EXIT);\n\n      if (options.transition) {\n        removeClass(list, CLASS_TRANSITION);\n\n        if (this.viewed) {\n          removeClass(image, CLASS_TRANSITION);\n        }\n      }\n\n      addClass(viewer, CLASS_FIXED);\n      viewer.setAttribute('role', 'dialog');\n      viewer.setAttribute('aria-labelledby', this.title.id);\n      viewer.setAttribute('aria-modal', true);\n      viewer.removeAttribute('style');\n      setStyle(viewer, {\n        zIndex: options.zIndex\n      });\n\n      if (options.focus) {\n        this.enforceFocus();\n      }\n\n      this.initContainer();\n      this.viewerData = assign({}, this.containerData);\n      this.renderList();\n\n      if (this.viewed) {\n        this.initImage(function () {\n          _this9.renderImage(function () {\n            if (options.transition) {\n              setTimeout(function () {\n                addClass(image, CLASS_TRANSITION);\n                addClass(list, CLASS_TRANSITION);\n              }, 0);\n            }\n          });\n        });\n      }\n\n      return this;\n    },\n    // Exit modal mode (only available in inline mode)\n    exit: function exit() {\n      var _this10 = this;\n\n      var options = this.options,\n          viewer = this.viewer,\n          image = this.image,\n          list = this.list;\n\n      if (!this.isShown || this.played || !this.fulled || !options.inline) {\n        return this;\n      }\n\n      this.fulled = false;\n      this.close();\n      removeClass(this.button, CLASS_FULLSCREEN_EXIT);\n\n      if (options.transition) {\n        removeClass(list, CLASS_TRANSITION);\n\n        if (this.viewed) {\n          removeClass(image, CLASS_TRANSITION);\n        }\n      }\n\n      if (options.focus) {\n        this.clearEnforceFocus();\n      }\n\n      viewer.removeAttribute('role');\n      viewer.removeAttribute('aria-labelledby');\n      viewer.removeAttribute('aria-modal');\n      removeClass(viewer, CLASS_FIXED);\n      setStyle(viewer, {\n        zIndex: options.zIndexInline\n      });\n      this.viewerData = assign({}, this.parentData);\n      this.renderViewer();\n      this.renderList();\n\n      if (this.viewed) {\n        this.initImage(function () {\n          _this10.renderImage(function () {\n            if (options.transition) {\n              setTimeout(function () {\n                addClass(image, CLASS_TRANSITION);\n                addClass(list, CLASS_TRANSITION);\n              }, 0);\n            }\n          });\n        });\n      }\n\n      return this;\n    },\n    // Show the current ratio of the image with percentage\n    tooltip: function tooltip() {\n      var _this11 = this;\n\n      var options = this.options,\n          tooltipBox = this.tooltipBox,\n          imageData = this.imageData;\n\n      if (!this.viewed || this.played || !options.tooltip) {\n        return this;\n      }\n\n      tooltipBox.textContent = \"\".concat(Math.round(imageData.ratio * 100), \"%\");\n\n      if (!this.tooltipping) {\n        if (options.transition) {\n          if (this.fading) {\n            dispatchEvent(tooltipBox, EVENT_TRANSITION_END);\n          }\n\n          addClass(tooltipBox, CLASS_SHOW);\n          addClass(tooltipBox, CLASS_FADE);\n          addClass(tooltipBox, CLASS_TRANSITION);\n          tooltipBox.removeAttribute('aria-hidden'); // Force reflow to enable CSS3 transition\n\n          tooltipBox.initialOffsetWidth = tooltipBox.offsetWidth;\n          addClass(tooltipBox, CLASS_IN);\n        } else {\n          addClass(tooltipBox, CLASS_SHOW);\n          tooltipBox.removeAttribute('aria-hidden');\n        }\n      } else {\n        clearTimeout(this.tooltipping);\n      }\n\n      this.tooltipping = setTimeout(function () {\n        if (options.transition) {\n          addListener(tooltipBox, EVENT_TRANSITION_END, function () {\n            removeClass(tooltipBox, CLASS_SHOW);\n            removeClass(tooltipBox, CLASS_FADE);\n            removeClass(tooltipBox, CLASS_TRANSITION);\n            tooltipBox.setAttribute('aria-hidden', true);\n            _this11.fading = false;\n          }, {\n            once: true\n          });\n          removeClass(tooltipBox, CLASS_IN);\n          _this11.fading = true;\n        } else {\n          removeClass(tooltipBox, CLASS_SHOW);\n          tooltipBox.setAttribute('aria-hidden', true);\n        }\n\n        _this11.tooltipping = false;\n      }, 1000);\n      return this;\n    },\n\n    /**\n     * Toggle the image size between its current size and natural size\n     * @param {Event} [_originalEvent=null] - The original event if any.\n     * @returns {Viewer} this\n     */\n    toggle: function toggle() {\n      var _originalEvent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n      if (this.imageData.ratio === 1) {\n        this.zoomTo(this.imageData.oldRatio, true, _originalEvent);\n      } else {\n        this.zoomTo(1, true, _originalEvent);\n      }\n\n      return this;\n    },\n    // Reset the image to its initial state\n    reset: function reset() {\n      if (this.viewed && !this.played) {\n        this.imageData = assign({}, this.initialImageData);\n        this.renderImage();\n      }\n\n      return this;\n    },\n    // Update viewer when images changed\n    update: function update() {\n      var _this12 = this;\n\n      var element = this.element,\n          options = this.options,\n          isImg = this.isImg; // Destroy viewer if the target image was deleted\n\n      if (isImg && !element.parentNode) {\n        return this.destroy();\n      }\n\n      var images = [];\n      forEach(isImg ? [element] : element.querySelectorAll('img'), function (image) {\n        if (isFunction(options.filter)) {\n          if (options.filter.call(_this12, image)) {\n            images.push(image);\n          }\n        } else if (_this12.getImageURL(image)) {\n          images.push(image);\n        }\n      });\n\n      if (!images.length) {\n        return this;\n      }\n\n      this.images = images;\n      this.length = images.length;\n\n      if (this.ready) {\n        var changedIndexes = [];\n        forEach(this.items, function (item, i) {\n          var img = item.querySelector('img');\n          var image = images[i];\n\n          if (image && img) {\n            if (image.src !== img.src // Title changed (#408)\n            || image.alt !== img.alt) {\n              changedIndexes.push(i);\n            }\n          } else {\n            changedIndexes.push(i);\n          }\n        });\n        setStyle(this.list, {\n          width: 'auto'\n        });\n        this.initList();\n\n        if (this.isShown) {\n          if (this.length) {\n            if (this.viewed) {\n              var changedIndex = changedIndexes.indexOf(this.index);\n\n              if (changedIndex >= 0) {\n                this.viewed = false;\n                this.view(Math.max(Math.min(this.index - changedIndex, this.length - 1), 0));\n              } else {\n                var activeItem = this.items[this.index]; // Reactivate the current viewing item after reset the list.\n\n                addClass(activeItem, CLASS_ACTIVE);\n                activeItem.setAttribute('aria-selected', true);\n              }\n            }\n          } else {\n            this.image = null;\n            this.viewed = false;\n            this.index = 0;\n            this.imageData = {};\n            this.canvas.innerHTML = '';\n            this.title.innerHTML = '';\n          }\n        }\n      } else {\n        this.build();\n      }\n\n      return this;\n    },\n    // Destroy the viewer\n    destroy: function destroy() {\n      var element = this.element,\n          options = this.options;\n\n      if (!element[NAMESPACE]) {\n        return this;\n      }\n\n      this.destroyed = true;\n\n      if (this.ready) {\n        if (this.played) {\n          this.stop();\n        }\n\n        if (options.inline) {\n          if (this.fulled) {\n            this.exit();\n          }\n\n          this.unbind();\n        } else if (this.isShown) {\n          if (this.viewing) {\n            if (this.imageRendering) {\n              this.imageRendering.abort();\n            } else if (this.imageInitializing) {\n              this.imageInitializing.abort();\n            }\n          }\n\n          if (this.hiding) {\n            this.transitioning.abort();\n          }\n\n          this.hidden();\n        } else if (this.showing) {\n          this.transitioning.abort();\n          this.hidden();\n        }\n\n        this.ready = false;\n        this.viewer.parentNode.removeChild(this.viewer);\n      } else if (options.inline) {\n        if (this.delaying) {\n          this.delaying.abort();\n        } else if (this.initializing) {\n          this.initializing.abort();\n        }\n      }\n\n      if (!options.inline) {\n        removeListener(element, EVENT_CLICK, this.onStart);\n      }\n\n      element[NAMESPACE] = undefined;\n      return this;\n    }\n  };\n\n  var others = {\n    getImageURL: function getImageURL(image) {\n      var url = this.options.url;\n\n      if (isString(url)) {\n        url = image.getAttribute(url);\n      } else if (isFunction(url)) {\n        url = url.call(this, image);\n      } else {\n        url = '';\n      }\n\n      return url;\n    },\n    enforceFocus: function enforceFocus() {\n      var _this = this;\n\n      this.clearEnforceFocus();\n      addListener(document, EVENT_FOCUSIN, this.onFocusin = function (event) {\n        var viewer = _this.viewer;\n        var target = event.target;\n\n        if (target !== document && target !== viewer && !viewer.contains(target) // Avoid conflicts with other modals (#474)\n        && (target.getAttribute('tabindex') === null || target.getAttribute('aria-modal') !== 'true')) {\n          viewer.focus();\n        }\n      });\n    },\n    clearEnforceFocus: function clearEnforceFocus() {\n      if (this.onFocusin) {\n        removeListener(document, EVENT_FOCUSIN, this.onFocusin);\n        this.onFocusin = null;\n      }\n    },\n    open: function open() {\n      var body = this.body;\n      addClass(body, CLASS_OPEN);\n      body.style.paddingRight = \"\".concat(this.scrollbarWidth + (parseFloat(this.initialBodyComputedPaddingRight) || 0), \"px\");\n    },\n    close: function close() {\n      var body = this.body;\n      removeClass(body, CLASS_OPEN);\n      body.style.paddingRight = this.initialBodyPaddingRight;\n    },\n    shown: function shown() {\n      var element = this.element,\n          options = this.options,\n          viewer = this.viewer;\n      this.fulled = true;\n      this.isShown = true;\n      this.render();\n      this.bind();\n      this.showing = false;\n\n      if (options.focus) {\n        viewer.focus();\n        this.enforceFocus();\n      }\n\n      if (isFunction(options.shown)) {\n        addListener(element, EVENT_SHOWN, options.shown, {\n          once: true\n        });\n      }\n\n      if (dispatchEvent(element, EVENT_SHOWN) === false) {\n        return;\n      }\n\n      if (this.ready && this.isShown && !this.hiding) {\n        this.view(this.index);\n      }\n    },\n    hidden: function hidden() {\n      var element = this.element,\n          options = this.options,\n          viewer = this.viewer;\n\n      if (options.fucus) {\n        this.clearEnforceFocus();\n      }\n\n      this.fulled = false;\n      this.viewed = false;\n      this.isShown = false;\n      this.close();\n      this.unbind();\n      addClass(viewer, CLASS_HIDE);\n      viewer.removeAttribute('role');\n      viewer.removeAttribute('aria-labelledby');\n      viewer.removeAttribute('aria-modal');\n      viewer.setAttribute('aria-hidden', true);\n      this.resetList();\n      this.resetImage();\n      this.hiding = false;\n\n      if (!this.destroyed) {\n        if (isFunction(options.hidden)) {\n          addListener(element, EVENT_HIDDEN, options.hidden, {\n            once: true\n          });\n        }\n\n        dispatchEvent(element, EVENT_HIDDEN, null, {\n          cancelable: false\n        });\n      }\n    },\n    requestFullscreen: function requestFullscreen(options) {\n      var document = this.element.ownerDocument;\n\n      if (this.fulled && !(document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement)) {\n        var documentElement = document.documentElement; // Element.requestFullscreen()\n\n        if (documentElement.requestFullscreen) {\n          // Avoid TypeError when convert `options` to dictionary\n          if (isPlainObject(options)) {\n            documentElement.requestFullscreen(options);\n          } else {\n            documentElement.requestFullscreen();\n          }\n        } else if (documentElement.webkitRequestFullscreen) {\n          documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n        } else if (documentElement.mozRequestFullScreen) {\n          documentElement.mozRequestFullScreen();\n        } else if (documentElement.msRequestFullscreen) {\n          documentElement.msRequestFullscreen();\n        }\n      }\n    },\n    exitFullscreen: function exitFullscreen() {\n      var document = this.element.ownerDocument;\n\n      if (this.fulled && (document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement)) {\n        // Document.exitFullscreen()\n        if (document.exitFullscreen) {\n          document.exitFullscreen();\n        } else if (document.webkitExitFullscreen) {\n          document.webkitExitFullscreen();\n        } else if (document.mozCancelFullScreen) {\n          document.mozCancelFullScreen();\n        } else if (document.msExitFullscreen) {\n          document.msExitFullscreen();\n        }\n      }\n    },\n    change: function change(event) {\n      var options = this.options,\n          pointers = this.pointers;\n      var pointer = pointers[Object.keys(pointers)[0]]; // In the case of the `pointers` object is empty (#421)\n\n      if (!pointer) {\n        return;\n      }\n\n      var offsetX = pointer.endX - pointer.startX;\n      var offsetY = pointer.endY - pointer.startY;\n\n      switch (this.action) {\n        // Move the current image\n        case ACTION_MOVE:\n          this.move(offsetX, offsetY, event);\n          break;\n        // Zoom the current image\n\n        case ACTION_ZOOM:\n          this.zoom(getMaxZoomRatio(pointers), false, event);\n          break;\n\n        case ACTION_SWITCH:\n          {\n            this.action = 'switched';\n            var absoluteOffsetX = Math.abs(offsetX);\n\n            if (absoluteOffsetX > 1 && absoluteOffsetX > Math.abs(offsetY)) {\n              // Empty `pointers` as `touchend` event will not be fired after swiped in iOS browsers.\n              this.pointers = {};\n\n              if (offsetX > 1) {\n                this.prev(options.loop);\n              } else if (offsetX < -1) {\n                this.next(options.loop);\n              }\n            }\n\n            break;\n          }\n      } // Override\n\n\n      forEach(pointers, function (p) {\n        p.startX = p.endX;\n        p.startY = p.endY;\n      });\n    },\n    isSwitchable: function isSwitchable() {\n      var imageData = this.imageData,\n          viewerData = this.viewerData;\n      return this.length > 1 && imageData.x >= 0 && imageData.y >= 0 && imageData.width <= viewerData.width && imageData.height <= viewerData.height;\n    }\n  };\n\n  var AnotherViewer = WINDOW.Viewer;\n\n  var getUniqueID = function (id) {\n    return function () {\n      id += 1;\n      return id;\n    };\n  }(-1);\n\n  var Viewer = /*#__PURE__*/function () {\n    /**\n     * Create a new Viewer.\n     * @param {Element} element - The target element for viewing.\n     * @param {Object} [options={}] - The configuration options.\n     */\n    function Viewer(element) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      _classCallCheck(this, Viewer);\n\n      if (!element || element.nodeType !== 1) {\n        throw new Error('The first argument is required and must be an element.');\n      }\n\n      this.element = element;\n      this.options = assign({}, DEFAULTS, isPlainObject(options) && options);\n      this.action = false;\n      this.fading = false;\n      this.fulled = false;\n      this.hiding = false;\n      this.imageClicked = false;\n      this.imageData = {};\n      this.index = this.options.initialViewIndex;\n      this.isImg = false;\n      this.isShown = false;\n      this.length = 0;\n      this.moving = false;\n      this.played = false;\n      this.playing = false;\n      this.pointers = {};\n      this.ready = false;\n      this.rotating = false;\n      this.scaling = false;\n      this.showing = false;\n      this.timeout = false;\n      this.tooltipping = false;\n      this.viewed = false;\n      this.viewing = false;\n      this.wheeling = false;\n      this.zooming = false;\n      this.id = getUniqueID();\n      this.init();\n    }\n\n    _createClass(Viewer, [{\n      key: \"init\",\n      value: function init() {\n        var _this = this;\n\n        var element = this.element,\n            options = this.options;\n\n        if (element[NAMESPACE]) {\n          return;\n        }\n\n        element[NAMESPACE] = this; // The `focus` option requires the `keyboard` option set to `true`.\n\n        if (options.focus && !options.keyboard) {\n          options.focus = false;\n        }\n\n        var isImg = element.localName === 'img';\n        var images = [];\n        forEach(isImg ? [element] : element.querySelectorAll('img'), function (image) {\n          if (isFunction(options.filter)) {\n            if (options.filter.call(_this, image)) {\n              images.push(image);\n            }\n          } else if (_this.getImageURL(image)) {\n            images.push(image);\n          }\n        });\n        this.isImg = isImg;\n        this.length = images.length;\n        this.images = images;\n        this.initBody(); // Override `transition` option if it is not supported\n\n        if (isUndefined(document.createElement(NAMESPACE).style.transition)) {\n          options.transition = false;\n        }\n\n        if (options.inline) {\n          var count = 0;\n\n          var progress = function progress() {\n            count += 1;\n\n            if (count === _this.length) {\n              var timeout;\n              _this.initializing = false;\n              _this.delaying = {\n                abort: function abort() {\n                  clearTimeout(timeout);\n                }\n              }; // build asynchronously to keep `this.viewer` is accessible in `ready` event handler.\n\n              timeout = setTimeout(function () {\n                _this.delaying = false;\n\n                _this.build();\n              }, 0);\n            }\n          };\n\n          this.initializing = {\n            abort: function abort() {\n              forEach(images, function (image) {\n                if (!image.complete) {\n                  removeListener(image, EVENT_LOAD, progress);\n                }\n              });\n            }\n          };\n          forEach(images, function (image) {\n            if (image.complete) {\n              progress();\n            } else {\n              addListener(image, EVENT_LOAD, progress, {\n                once: true\n              });\n            }\n          });\n        } else {\n          addListener(element, EVENT_CLICK, this.onStart = function (_ref) {\n            var target = _ref.target;\n\n            if (target.localName === 'img' && (!isFunction(options.filter) || options.filter.call(_this, target))) {\n              _this.view(_this.images.indexOf(target));\n            }\n          });\n        }\n      }\n    }, {\n      key: \"build\",\n      value: function build() {\n        if (this.ready) {\n          return;\n        }\n\n        var element = this.element,\n            options = this.options;\n        var parent = element.parentNode;\n        var template = document.createElement('div');\n        template.innerHTML = TEMPLATE;\n        var viewer = template.querySelector(\".\".concat(NAMESPACE, \"-container\"));\n        var title = viewer.querySelector(\".\".concat(NAMESPACE, \"-title\"));\n        var toolbar = viewer.querySelector(\".\".concat(NAMESPACE, \"-toolbar\"));\n        var navbar = viewer.querySelector(\".\".concat(NAMESPACE, \"-navbar\"));\n        var button = viewer.querySelector(\".\".concat(NAMESPACE, \"-button\"));\n        var canvas = viewer.querySelector(\".\".concat(NAMESPACE, \"-canvas\"));\n        this.parent = parent;\n        this.viewer = viewer;\n        this.title = title;\n        this.toolbar = toolbar;\n        this.navbar = navbar;\n        this.button = button;\n        this.canvas = canvas;\n        this.footer = viewer.querySelector(\".\".concat(NAMESPACE, \"-footer\"));\n        this.tooltipBox = viewer.querySelector(\".\".concat(NAMESPACE, \"-tooltip\"));\n        this.player = viewer.querySelector(\".\".concat(NAMESPACE, \"-player\"));\n        this.list = viewer.querySelector(\".\".concat(NAMESPACE, \"-list\"));\n        viewer.id = \"\".concat(NAMESPACE).concat(this.id);\n        title.id = \"\".concat(NAMESPACE, \"Title\").concat(this.id);\n        addClass(title, !options.title ? CLASS_HIDE : getResponsiveClass(Array.isArray(options.title) ? options.title[0] : options.title));\n        addClass(navbar, !options.navbar ? CLASS_HIDE : getResponsiveClass(options.navbar));\n        toggleClass(button, CLASS_HIDE, !options.button);\n\n        if (options.keyboard) {\n          button.setAttribute('tabindex', 0);\n        }\n\n        if (options.backdrop) {\n          addClass(viewer, \"\".concat(NAMESPACE, \"-backdrop\"));\n\n          if (!options.inline && options.backdrop !== 'static') {\n            setData(canvas, DATA_ACTION, 'hide');\n          }\n        }\n\n        if (isString(options.className) && options.className) {\n          // In case there are multiple class names\n          options.className.split(REGEXP_SPACES).forEach(function (className) {\n            addClass(viewer, className);\n          });\n        }\n\n        if (options.toolbar) {\n          var list = document.createElement('ul');\n          var custom = isPlainObject(options.toolbar);\n          var zoomButtons = BUTTONS.slice(0, 3);\n          var rotateButtons = BUTTONS.slice(7, 9);\n          var scaleButtons = BUTTONS.slice(9);\n\n          if (!custom) {\n            addClass(toolbar, getResponsiveClass(options.toolbar));\n          }\n\n          forEach(custom ? options.toolbar : BUTTONS, function (value, index) {\n            var deep = custom && isPlainObject(value);\n            var name = custom ? hyphenate(index) : value;\n            var show = deep && !isUndefined(value.show) ? value.show : value;\n\n            if (!show || !options.zoomable && zoomButtons.indexOf(name) !== -1 || !options.rotatable && rotateButtons.indexOf(name) !== -1 || !options.scalable && scaleButtons.indexOf(name) !== -1) {\n              return;\n            }\n\n            var size = deep && !isUndefined(value.size) ? value.size : value;\n            var click = deep && !isUndefined(value.click) ? value.click : value;\n            var item = document.createElement('li');\n\n            if (options.keyboard) {\n              item.setAttribute('tabindex', 0);\n            }\n\n            item.setAttribute('role', 'button');\n            addClass(item, \"\".concat(NAMESPACE, \"-\").concat(name));\n\n            if (!isFunction(click)) {\n              setData(item, DATA_ACTION, name);\n            }\n\n            if (isNumber(show)) {\n              addClass(item, getResponsiveClass(show));\n            }\n\n            if (['small', 'large'].indexOf(size) !== -1) {\n              addClass(item, \"\".concat(NAMESPACE, \"-\").concat(size));\n            } else if (name === 'play') {\n              addClass(item, \"\".concat(NAMESPACE, \"-large\"));\n            }\n\n            if (isFunction(click)) {\n              addListener(item, EVENT_CLICK, click);\n            }\n\n            list.appendChild(item);\n          });\n          toolbar.appendChild(list);\n        } else {\n          addClass(toolbar, CLASS_HIDE);\n        }\n\n        if (!options.rotatable) {\n          var rotates = toolbar.querySelectorAll('li[class*=\"rotate\"]');\n          addClass(rotates, CLASS_INVISIBLE);\n          forEach(rotates, function (rotate) {\n            toolbar.appendChild(rotate);\n          });\n        }\n\n        if (options.inline) {\n          addClass(button, CLASS_FULLSCREEN);\n          setStyle(viewer, {\n            zIndex: options.zIndexInline\n          });\n\n          if (window.getComputedStyle(parent).position === 'static') {\n            setStyle(parent, {\n              position: 'relative'\n            });\n          }\n\n          parent.insertBefore(viewer, element.nextSibling);\n        } else {\n          addClass(button, CLASS_CLOSE);\n          addClass(viewer, CLASS_FIXED);\n          addClass(viewer, CLASS_FADE);\n          addClass(viewer, CLASS_HIDE);\n          setStyle(viewer, {\n            zIndex: options.zIndex\n          });\n          var container = options.container;\n\n          if (isString(container)) {\n            container = element.ownerDocument.querySelector(container);\n          }\n\n          if (!container) {\n            container = this.body;\n          }\n\n          container.appendChild(viewer);\n        }\n\n        if (options.inline) {\n          this.render();\n          this.bind();\n          this.isShown = true;\n        }\n\n        this.ready = true;\n\n        if (isFunction(options.ready)) {\n          addListener(element, EVENT_READY, options.ready, {\n            once: true\n          });\n        }\n\n        if (dispatchEvent(element, EVENT_READY) === false) {\n          this.ready = false;\n          return;\n        }\n\n        if (this.ready && options.inline) {\n          this.view(this.index);\n        }\n      }\n      /**\n       * Get the no conflict viewer class.\n       * @returns {Viewer} The viewer class.\n       */\n\n    }], [{\n      key: \"noConflict\",\n      value: function noConflict() {\n        window.Viewer = AnotherViewer;\n        return Viewer;\n      }\n      /**\n       * Change the default options.\n       * @param {Object} options - The new default options.\n       */\n\n    }, {\n      key: \"setDefaults\",\n      value: function setDefaults(options) {\n        assign(DEFAULTS, isPlainObject(options) && options);\n      }\n    }]);\n\n    return Viewer;\n  }();\n\n  assign(Viewer.prototype, render, events, handlers, methods, others);\n\n  return Viewer;\n\n})));\n","import Viewer from 'viewerjs';\r\n\r\n\r\nconst  zoomImatge = (id) => {\r\n  const viewer = new Viewer(document.getElementById(id), {\r\n     viewed() {\r\n       viewer.zoomTo(1);\r\n     },\r\n  });\r\n  viewer.show();\r\n}\r\n\r\nwindow.zoomImatge = zoomImatge;\r\n\r\n\r\n"],"names":["global","factory","$ba966d2e62802c93$exports","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_typeof","obj","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","configurable","writable","value","DEFAULTS","backdrop","button","navbar","title","toolbar","className","container","fullscreen","inheritedAttributes","initialViewIndex","inline","interval","keyboard","focus","loading","loop","minWidth","minHeight","movable","rotatable","scalable","zoomable","zoomOnTouch","zoomOnWheel","slideOnTouch","toggleOnDblclick","tooltip","transition","zIndex","zIndexInline","zoomRatio","minZoomRatio","maxZoomRatio","url","ready","show","shown","hide","hidden","view","viewed","move","moved","rotate","rotated","scale","scaled","zoom","zoomed","play","stop","IS_BROWSER","window","document","WINDOW","IS_TOUCH_DEVICE","documentElement","HAS_POINTER_EVENT","NAMESPACE","ACTION_MOVE","ACTION_SWITCH","ACTION_ZOOM","CLASS_ACTIVE","concat","CLASS_CLOSE","CLASS_FADE","CLASS_FIXED","CLASS_FULLSCREEN","CLASS_FULLSCREEN_EXIT","CLASS_HIDE","CLASS_HIDE_MD_DOWN","CLASS_HIDE_SM_DOWN","CLASS_HIDE_XS_DOWN","CLASS_IN","CLASS_INVISIBLE","CLASS_LOADING","CLASS_MOVE","CLASS_OPEN","CLASS_SHOW","CLASS_TRANSITION","EVENT_CLICK","EVENT_DBLCLICK","EVENT_DRAG_START","EVENT_FOCUSIN","EVENT_KEY_DOWN","EVENT_LOAD","EVENT_POINTER_DOWN","EVENT_POINTER_MOVE","EVENT_POINTER_UP","EVENT_RESIZE","EVENT_TRANSITION_END","EVENT_WHEEL","EVENT_READY","EVENT_SHOW","EVENT_SHOWN","EVENT_HIDE","EVENT_HIDDEN","EVENT_VIEW","EVENT_VIEWED","EVENT_MOVE","EVENT_MOVED","EVENT_ROTATE","EVENT_ROTATED","EVENT_SCALE","EVENT_SCALED","EVENT_ZOOM","EVENT_ZOOMED","EVENT_PLAY","EVENT_STOP","DATA_ACTION","REGEXP_SPACES","BUTTONS","isString","isNaN","Number","isNumber","isUndefined","isObject","hasOwnProperty","isPlainObject","_constructor","call","error","isFunction","data","callback","Array","isArray","assign","_len","args","_key","arg","REGEXP_SUFFIX","setStyle","element","styles","style","property","test","escapeHTMLEntities","replace","hasClass","classList","contains","indexOf","addClass","elem","add","trim","removeClass","remove","toggleClass","added","REGEXP_HYPHENATE","hyphenate","toLowerCase","getData","name","dataset","getAttribute","setData","setAttribute","onceSupported","supported","once","listener","options","get","set","addEventListener","removeEventListener","removeListener","type","undefined","handler","split","event","listeners","addListener","_handler","_element$listeners","_len2","_key2","dispatchEvent","Event","CustomEvent","bubbles","cancelable","detail","createEvent","initCustomEvent","getOffset","box","getBoundingClientRect","left","pageXOffset","clientLeft","top","pageYOffset","clientTop","getTransforms","_ref","scaleX","scaleY","translateX","translateY","values","transform","join","WebkitTransform","msTransform","IS_SAFARI","navigator","userAgent","getImageNaturalSizes","image","newImage","createElement","naturalWidth","naturalHeight","body","onload","width","height","removeChild","src","cssText","appendChild","getResponsiveClass","getPointer","_ref2","endOnly","pageX","pageY","end","endX","endY","timeStamp","Date","now","startX","startY","getPointersCenter","pointers","count","_ref3","id","render","this","initContainer","initViewer","initList","renderViewer","initBody","ownerDocument","scrollbarWidth","innerWidth","clientWidth","initialBodyPaddingRight","paddingRight","initialBodyComputedPaddingRight","getComputedStyle","containerData","innerHeight","viewerData","parent","Math","max","offsetWidth","offsetHeight","parentData","fulled","viewer","_this","list","items","innerHTML","images","index","alt","decodeURIComponent","getImageNameFromURL","getImageURL","item","img","firstElementChild","loadImage","renderList","next","nextElementSibling","gutter","parseInt","marginLeft","outerWidth","resetList","initImage","done","sizingImage","_this2","footerHeight","footer","viewerWidth","viewerHeight","oldImageData","imageData","imageInitializing","abort","aspectRatio","min","x","y","oldRatio","ratio","initialImageData","renderImage","_this3","marginTop","viewing","moving","rotating","scaling","zooming","onTransitionEnd","imageRendering","resetImage","parentNode","events","bind","canvas","onClick","click","onDragStart","dragstart","onPointerDown","pointerdown","onPointerMove","pointermove","onPointerUp","pointerup","onKeyDown","keydown","onResize","resize","onWheel","wheel","passive","capture","onDblclick","dblclick","unbind","handlers","action","localName","parentElement","isTrusted","clearTimeout","clickCanvasTimeout","played","exit","full","toggle","reset","prev","preventDefault","doubleClickImageTimeout","load","timeout","originalImage","parentWidth","parentHeight","filled","keyCode","which","charCode","ctrlKey","buttons","showing","hiding","pointerType","changedTouches","touch","identifier","pointerId","isSwitchable","change","pointer","imageClicked","setTimeout","isShown","close","open","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","player","getElementsByTagName","_this4","wheeling","delta","deltaY","wheelDelta","methods","immediate","build","transitioning","removeAttribute","initialOffsetWidth","hideImmediately","onViewerTransitionEnd","onImageTransitionEnd","zoomTo","querySelector","activeItem","onLoad","onViewed","complete","maxIndex","moveTo","_originalEvent","oldX","oldY","changed","originalEvent","degree","rotateTo","oldDegree","_scaleX","_scaleY","_this5","oldScaleX","oldScaleY","hasTooltip","_this6","_zoomable","newWidth","newHeight","offset","center","_this7","total","onLoadWhenPlay","requestFullscreen","referrerPolicy","playing","_this8","exitFullscreen","_this9","enforceFocus","_this10","clearEnforceFocus","_this11","tooltipBox","textContent","round","tooltipping","fading","update","_this12","isImg","destroy","querySelectorAll","changedIndexes","changedIndex","destroyed","delaying","initializing","onStart","others","onFocusin","parseFloat","fucus","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","mozRequestFullScreen","msRequestFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen","offsetX","offsetY","pointers2","ratios","pointer2","x1","abs","y1","x2","y2","z1","sqrt","sort","a","b","getMaxZoomRatio","absoluteOffsetX","p","AnotherViewer","Viewer","getUniqueID","nodeType","Error","init","protoProps","staticProps","progress","template","custom","zoomButtons","slice","rotateButtons","scaleButtons","deep","size","rotates","position","insertBefore","nextSibling","define","amd","globalThis","self","zoomImatge","$parcel$interopDefault","getElementById"],"version":3,"file":"cat1.e77b4e1f.js.map"}